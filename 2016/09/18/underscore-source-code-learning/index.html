<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Undersocre 源码阅读 | Kenve's Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/6.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Undersocre 源码阅读</h1><a id="logo" href="/.">Kenve's Blog</a><p class="description">世界和平(.)</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Undersocre 源码阅读</h1><div class="post-meta">Sep 18, 2016<span> | </span><span class="category"><a href="/categories/Web/">Web</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="post-content"><p>源码版本：Underscore.js 1.8.3</p>
<a id="more"></a>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div><div class="line">489</div><div class="line">490</div><div class="line">491</div><div class="line">492</div><div class="line">493</div><div class="line">494</div><div class="line">495</div><div class="line">496</div><div class="line">497</div><div class="line">498</div><div class="line">499</div><div class="line">500</div><div class="line">501</div><div class="line">502</div><div class="line">503</div><div class="line">504</div><div class="line">505</div><div class="line">506</div><div class="line">507</div><div class="line">508</div><div class="line">509</div><div class="line">510</div><div class="line">511</div><div class="line">512</div><div class="line">513</div><div class="line">514</div><div class="line">515</div><div class="line">516</div><div class="line">517</div><div class="line">518</div><div class="line">519</div><div class="line">520</div><div class="line">521</div><div class="line">522</div><div class="line">523</div><div class="line">524</div><div class="line">525</div><div class="line">526</div><div class="line">527</div><div class="line">528</div><div class="line">529</div><div class="line">530</div><div class="line">531</div><div class="line">532</div><div class="line">533</div><div class="line">534</div><div class="line">535</div><div class="line">536</div><div class="line">537</div><div class="line">538</div><div class="line">539</div><div class="line">540</div><div class="line">541</div><div class="line">542</div><div class="line">543</div><div class="line">544</div><div class="line">545</div><div class="line">546</div><div class="line">547</div><div class="line">548</div><div class="line">549</div><div class="line">550</div><div class="line">551</div><div class="line">552</div><div class="line">553</div><div class="line">554</div><div class="line">555</div><div class="line">556</div><div class="line">557</div><div class="line">558</div><div class="line">559</div><div class="line">560</div><div class="line">561</div><div class="line">562</div><div class="line">563</div><div class="line">564</div><div class="line">565</div><div class="line">566</div><div class="line">567</div><div class="line">568</div><div class="line">569</div><div class="line">570</div><div class="line">571</div><div class="line">572</div><div class="line">573</div><div class="line">574</div><div class="line">575</div><div class="line">576</div><div class="line">577</div><div class="line">578</div><div class="line">579</div><div class="line">580</div><div class="line">581</div><div class="line">582</div><div class="line">583</div><div class="line">584</div><div class="line">585</div><div class="line">586</div><div class="line">587</div><div class="line">588</div><div class="line">589</div><div class="line">590</div><div class="line">591</div><div class="line">592</div><div class="line">593</div><div class="line">594</div><div class="line">595</div><div class="line">596</div><div class="line">597</div><div class="line">598</div><div class="line">599</div><div class="line">600</div><div class="line">601</div><div class="line">602</div><div class="line">603</div><div class="line">604</div><div class="line">605</div><div class="line">606</div><div class="line">607</div><div class="line">608</div><div class="line">609</div><div class="line">610</div><div class="line">611</div><div class="line">612</div><div class="line">613</div><div class="line">614</div><div class="line">615</div><div class="line">616</div><div class="line">617</div><div class="line">618</div><div class="line">619</div><div class="line">620</div><div class="line">621</div><div class="line">622</div><div class="line">623</div><div class="line">624</div><div class="line">625</div><div class="line">626</div><div class="line">627</div><div class="line">628</div><div class="line">629</div><div class="line">630</div><div class="line">631</div><div class="line">632</div><div class="line">633</div><div class="line">634</div><div class="line">635</div><div class="line">636</div><div class="line">637</div><div class="line">638</div><div class="line">639</div><div class="line">640</div><div class="line">641</div><div class="line">642</div><div class="line">643</div><div class="line">644</div><div class="line">645</div><div class="line">646</div><div class="line">647</div><div class="line">648</div><div class="line">649</div><div class="line">650</div><div class="line">651</div><div class="line">652</div><div class="line">653</div><div class="line">654</div><div class="line">655</div><div class="line">656</div><div class="line">657</div><div class="line">658</div><div class="line">659</div><div class="line">660</div><div class="line">661</div><div class="line">662</div><div class="line">663</div><div class="line">664</div><div class="line">665</div><div class="line">666</div><div class="line">667</div><div class="line">668</div><div class="line">669</div><div class="line">670</div><div class="line">671</div><div class="line">672</div><div class="line">673</div><div class="line">674</div><div class="line">675</div><div class="line">676</div><div class="line">677</div><div class="line">678</div><div class="line">679</div><div class="line">680</div><div class="line">681</div><div class="line">682</div><div class="line">683</div><div class="line">684</div><div class="line">685</div><div class="line">686</div><div class="line">687</div><div class="line">688</div><div class="line">689</div><div class="line">690</div><div class="line">691</div><div class="line">692</div><div class="line">693</div><div class="line">694</div><div class="line">695</div><div class="line">696</div><div class="line">697</div><div class="line">698</div><div class="line">699</div><div class="line">700</div><div class="line">701</div><div class="line">702</div><div class="line">703</div><div class="line">704</div><div class="line">705</div><div class="line">706</div><div class="line">707</div><div class="line">708</div><div class="line">709</div><div class="line">710</div><div class="line">711</div><div class="line">712</div><div class="line">713</div><div class="line">714</div><div class="line">715</div><div class="line">716</div><div class="line">717</div><div class="line">718</div><div class="line">719</div><div class="line">720</div><div class="line">721</div><div class="line">722</div><div class="line">723</div><div class="line">724</div><div class="line">725</div><div class="line">726</div><div class="line">727</div><div class="line">728</div><div class="line">729</div><div class="line">730</div><div class="line">731</div><div class="line">732</div><div class="line">733</div><div class="line">734</div><div class="line">735</div><div class="line">736</div><div class="line">737</div><div class="line">738</div><div class="line">739</div><div class="line">740</div><div class="line">741</div><div class="line">742</div><div class="line">743</div><div class="line">744</div><div class="line">745</div><div class="line">746</div><div class="line">747</div><div class="line">748</div><div class="line">749</div><div class="line">750</div><div class="line">751</div><div class="line">752</div><div class="line">753</div><div class="line">754</div><div class="line">755</div><div class="line">756</div><div class="line">757</div><div class="line">758</div><div class="line">759</div><div class="line">760</div><div class="line">761</div><div class="line">762</div><div class="line">763</div><div class="line">764</div><div class="line">765</div><div class="line">766</div><div class="line">767</div><div class="line">768</div><div class="line">769</div><div class="line">770</div><div class="line">771</div><div class="line">772</div><div class="line">773</div><div class="line">774</div><div class="line">775</div><div class="line">776</div><div class="line">777</div><div class="line">778</div><div class="line">779</div><div class="line">780</div><div class="line">781</div><div class="line">782</div><div class="line">783</div><div class="line">784</div><div class="line">785</div><div class="line">786</div><div class="line">787</div><div class="line">788</div><div class="line">789</div><div class="line">790</div><div class="line">791</div><div class="line">792</div><div class="line">793</div><div class="line">794</div><div class="line">795</div><div class="line">796</div><div class="line">797</div><div class="line">798</div><div class="line">799</div><div class="line">800</div><div class="line">801</div><div class="line">802</div><div class="line">803</div><div class="line">804</div><div class="line">805</div><div class="line">806</div><div class="line">807</div><div class="line">808</div><div class="line">809</div><div class="line">810</div><div class="line">811</div><div class="line">812</div><div class="line">813</div><div class="line">814</div><div class="line">815</div><div class="line">816</div><div class="line">817</div><div class="line">818</div><div class="line">819</div><div class="line">820</div><div class="line">821</div><div class="line">822</div><div class="line">823</div><div class="line">824</div><div class="line">825</div><div class="line">826</div><div class="line">827</div><div class="line">828</div><div class="line">829</div><div class="line">830</div><div class="line">831</div><div class="line">832</div><div class="line">833</div><div class="line">834</div><div class="line">835</div><div class="line">836</div><div class="line">837</div><div class="line">838</div><div class="line">839</div><div class="line">840</div><div class="line">841</div><div class="line">842</div><div class="line">843</div><div class="line">844</div><div class="line">845</div><div class="line">846</div><div class="line">847</div><div class="line">848</div><div class="line">849</div><div class="line">850</div><div class="line">851</div><div class="line">852</div><div class="line">853</div><div class="line">854</div><div class="line">855</div><div class="line">856</div><div class="line">857</div><div class="line">858</div><div class="line">859</div><div class="line">860</div><div class="line">861</div><div class="line">862</div><div class="line">863</div><div class="line">864</div><div class="line">865</div><div class="line">866</div><div class="line">867</div><div class="line">868</div><div class="line">869</div><div class="line">870</div><div class="line">871</div><div class="line">872</div><div class="line">873</div><div class="line">874</div><div class="line">875</div><div class="line">876</div><div class="line">877</div><div class="line">878</div><div class="line">879</div><div class="line">880</div><div class="line">881</div><div class="line">882</div><div class="line">883</div><div class="line">884</div><div class="line">885</div><div class="line">886</div><div class="line">887</div><div class="line">888</div><div class="line">889</div><div class="line">890</div><div class="line">891</div><div class="line">892</div><div class="line">893</div><div class="line">894</div><div class="line">895</div><div class="line">896</div><div class="line">897</div><div class="line">898</div><div class="line">899</div><div class="line">900</div><div class="line">901</div><div class="line">902</div><div class="line">903</div><div class="line">904</div><div class="line">905</div><div class="line">906</div><div class="line">907</div><div class="line">908</div><div class="line">909</div><div class="line">910</div><div class="line">911</div><div class="line">912</div><div class="line">913</div><div class="line">914</div><div class="line">915</div><div class="line">916</div><div class="line">917</div><div class="line">918</div><div class="line">919</div><div class="line">920</div><div class="line">921</div><div class="line">922</div><div class="line">923</div><div class="line">924</div><div class="line">925</div><div class="line">926</div><div class="line">927</div><div class="line">928</div><div class="line">929</div><div class="line">930</div><div class="line">931</div><div class="line">932</div><div class="line">933</div><div class="line">934</div><div class="line">935</div><div class="line">936</div><div class="line">937</div><div class="line">938</div><div class="line">939</div><div class="line">940</div><div class="line">941</div><div class="line">942</div><div class="line">943</div><div class="line">944</div><div class="line">945</div><div class="line">946</div><div class="line">947</div><div class="line">948</div><div class="line">949</div><div class="line">950</div><div class="line">951</div><div class="line">952</div><div class="line">953</div><div class="line">954</div><div class="line">955</div><div class="line">956</div><div class="line">957</div><div class="line">958</div><div class="line">959</div><div class="line">960</div><div class="line">961</div><div class="line">962</div><div class="line">963</div><div class="line">964</div><div class="line">965</div><div class="line">966</div><div class="line">967</div><div class="line">968</div><div class="line">969</div><div class="line">970</div><div class="line">971</div><div class="line">972</div><div class="line">973</div><div class="line">974</div><div class="line">975</div><div class="line">976</div><div class="line">977</div><div class="line">978</div><div class="line">979</div><div class="line">980</div><div class="line">981</div><div class="line">982</div><div class="line">983</div><div class="line">984</div><div class="line">985</div><div class="line">986</div><div class="line">987</div><div class="line">988</div><div class="line">989</div><div class="line">990</div><div class="line">991</div><div class="line">992</div><div class="line">993</div><div class="line">994</div><div class="line">995</div><div class="line">996</div><div class="line">997</div><div class="line">998</div><div class="line">999</div><div class="line">1000</div><div class="line">1001</div><div class="line">1002</div><div class="line">1003</div><div class="line">1004</div><div class="line">1005</div><div class="line">1006</div><div class="line">1007</div><div class="line">1008</div><div class="line">1009</div><div class="line">1010</div><div class="line">1011</div><div class="line">1012</div><div class="line">1013</div><div class="line">1014</div><div class="line">1015</div><div class="line">1016</div><div class="line">1017</div><div class="line">1018</div><div class="line">1019</div><div class="line">1020</div><div class="line">1021</div><div class="line">1022</div><div class="line">1023</div><div class="line">1024</div><div class="line">1025</div><div class="line">1026</div><div class="line">1027</div><div class="line">1028</div><div class="line">1029</div><div class="line">1030</div><div class="line">1031</div><div class="line">1032</div><div class="line">1033</div><div class="line">1034</div><div class="line">1035</div><div class="line">1036</div><div class="line">1037</div><div class="line">1038</div><div class="line">1039</div><div class="line">1040</div><div class="line">1041</div><div class="line">1042</div><div class="line">1043</div><div class="line">1044</div><div class="line">1045</div><div class="line">1046</div><div class="line">1047</div><div class="line">1048</div><div class="line">1049</div><div class="line">1050</div><div class="line">1051</div><div class="line">1052</div><div class="line">1053</div><div class="line">1054</div><div class="line">1055</div><div class="line">1056</div><div class="line">1057</div><div class="line">1058</div><div class="line">1059</div><div class="line">1060</div><div class="line">1061</div><div class="line">1062</div><div class="line">1063</div><div class="line">1064</div><div class="line">1065</div><div class="line">1066</div><div class="line">1067</div><div class="line">1068</div><div class="line">1069</div><div class="line">1070</div><div class="line">1071</div><div class="line">1072</div><div class="line">1073</div><div class="line">1074</div><div class="line">1075</div><div class="line">1076</div><div class="line">1077</div><div class="line">1078</div><div class="line">1079</div><div class="line">1080</div><div class="line">1081</div><div class="line">1082</div><div class="line">1083</div><div class="line">1084</div><div class="line">1085</div><div class="line">1086</div><div class="line">1087</div><div class="line">1088</div><div class="line">1089</div><div class="line">1090</div><div class="line">1091</div><div class="line">1092</div><div class="line">1093</div><div class="line">1094</div><div class="line">1095</div><div class="line">1096</div><div class="line">1097</div><div class="line">1098</div><div class="line">1099</div><div class="line">1100</div><div class="line">1101</div><div class="line">1102</div><div class="line">1103</div><div class="line">1104</div><div class="line">1105</div><div class="line">1106</div><div class="line">1107</div><div class="line">1108</div><div class="line">1109</div><div class="line">1110</div><div class="line">1111</div><div class="line">1112</div><div class="line">1113</div><div class="line">1114</div><div class="line">1115</div><div class="line">1116</div><div class="line">1117</div><div class="line">1118</div><div class="line">1119</div><div class="line">1120</div><div class="line">1121</div><div class="line">1122</div><div class="line">1123</div><div class="line">1124</div><div class="line">1125</div><div class="line">1126</div><div class="line">1127</div><div class="line">1128</div><div class="line">1129</div><div class="line">1130</div><div class="line">1131</div><div class="line">1132</div><div class="line">1133</div><div class="line">1134</div><div class="line">1135</div><div class="line">1136</div><div class="line">1137</div><div class="line">1138</div><div class="line">1139</div><div class="line">1140</div><div class="line">1141</div><div class="line">1142</div><div class="line">1143</div><div class="line">1144</div><div class="line">1145</div><div class="line">1146</div><div class="line">1147</div><div class="line">1148</div><div class="line">1149</div><div class="line">1150</div><div class="line">1151</div><div class="line">1152</div><div class="line">1153</div><div class="line">1154</div><div class="line">1155</div><div class="line">1156</div><div class="line">1157</div><div class="line">1158</div><div class="line">1159</div><div class="line">1160</div><div class="line">1161</div><div class="line">1162</div><div class="line">1163</div><div class="line">1164</div><div class="line">1165</div><div class="line">1166</div><div class="line">1167</div><div class="line">1168</div><div class="line">1169</div><div class="line">1170</div><div class="line">1171</div><div class="line">1172</div><div class="line">1173</div><div class="line">1174</div><div class="line">1175</div><div class="line">1176</div><div class="line">1177</div><div class="line">1178</div><div class="line">1179</div><div class="line">1180</div><div class="line">1181</div><div class="line">1182</div><div class="line">1183</div><div class="line">1184</div><div class="line">1185</div><div class="line">1186</div><div class="line">1187</div><div class="line">1188</div><div class="line">1189</div><div class="line">1190</div><div class="line">1191</div><div class="line">1192</div><div class="line">1193</div><div class="line">1194</div><div class="line">1195</div><div class="line">1196</div><div class="line">1197</div><div class="line">1198</div><div class="line">1199</div><div class="line">1200</div><div class="line">1201</div><div class="line">1202</div><div class="line">1203</div><div class="line">1204</div><div class="line">1205</div><div class="line">1206</div><div class="line">1207</div><div class="line">1208</div><div class="line">1209</div><div class="line">1210</div><div class="line">1211</div><div class="line">1212</div><div class="line">1213</div><div class="line">1214</div><div class="line">1215</div><div class="line">1216</div><div class="line">1217</div><div class="line">1218</div><div class="line">1219</div><div class="line">1220</div><div class="line">1221</div><div class="line">1222</div><div class="line">1223</div><div class="line">1224</div><div class="line">1225</div><div class="line">1226</div><div class="line">1227</div><div class="line">1228</div><div class="line">1229</div><div class="line">1230</div><div class="line">1231</div><div class="line">1232</div><div class="line">1233</div><div class="line">1234</div><div class="line">1235</div><div class="line">1236</div><div class="line">1237</div><div class="line">1238</div><div class="line">1239</div><div class="line">1240</div><div class="line">1241</div><div class="line">1242</div><div class="line">1243</div><div class="line">1244</div><div class="line">1245</div><div class="line">1246</div><div class="line">1247</div><div class="line">1248</div><div class="line">1249</div><div class="line">1250</div><div class="line">1251</div><div class="line">1252</div><div class="line">1253</div><div class="line">1254</div><div class="line">1255</div><div class="line">1256</div><div class="line">1257</div><div class="line">1258</div><div class="line">1259</div><div class="line">1260</div><div class="line">1261</div><div class="line">1262</div><div class="line">1263</div><div class="line">1264</div><div class="line">1265</div><div class="line">1266</div><div class="line">1267</div><div class="line">1268</div><div class="line">1269</div><div class="line">1270</div><div class="line">1271</div><div class="line">1272</div><div class="line">1273</div><div class="line">1274</div><div class="line">1275</div><div class="line">1276</div><div class="line">1277</div><div class="line">1278</div><div class="line">1279</div><div class="line">1280</div><div class="line">1281</div><div class="line">1282</div><div class="line">1283</div><div class="line">1284</div><div class="line">1285</div><div class="line">1286</div><div class="line">1287</div><div class="line">1288</div><div class="line">1289</div><div class="line">1290</div><div class="line">1291</div><div class="line">1292</div><div class="line">1293</div><div class="line">1294</div><div class="line">1295</div><div class="line">1296</div><div class="line">1297</div><div class="line">1298</div><div class="line">1299</div><div class="line">1300</div><div class="line">1301</div><div class="line">1302</div><div class="line">1303</div><div class="line">1304</div><div class="line">1305</div><div class="line">1306</div><div class="line">1307</div><div class="line">1308</div><div class="line">1309</div><div class="line">1310</div><div class="line">1311</div><div class="line">1312</div><div class="line">1313</div><div class="line">1314</div><div class="line">1315</div><div class="line">1316</div><div class="line">1317</div><div class="line">1318</div><div class="line">1319</div><div class="line">1320</div><div class="line">1321</div><div class="line">1322</div><div class="line">1323</div><div class="line">1324</div><div class="line">1325</div><div class="line">1326</div><div class="line">1327</div><div class="line">1328</div><div class="line">1329</div><div class="line">1330</div><div class="line">1331</div><div class="line">1332</div><div class="line">1333</div><div class="line">1334</div><div class="line">1335</div><div class="line">1336</div><div class="line">1337</div><div class="line">1338</div><div class="line">1339</div><div class="line">1340</div><div class="line">1341</div><div class="line">1342</div><div class="line">1343</div><div class="line">1344</div><div class="line">1345</div><div class="line">1346</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">//     Underscore.js 1.8.3</div><div class="line">//     http://underscorejs.org</div><div class="line">//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters &amp; Editors</div><div class="line">//     Underscore may be freely distributed under the MIT license.</div><div class="line"></div><div class="line">// underscore的代码包裹在一个匿名自执行函数中 </div><div class="line">(function() &#123;</div><div class="line"></div><div class="line">		 // Baseline setup</div><div class="line">		 // --------------</div><div class="line"></div><div class="line">         // 创建一个全局对象, 在浏览器中表示为window对象, 在Node.js中表示global对象</div><div class="line">         var root = this;</div><div class="line"></div><div class="line">         // 保存"_"(下划线变量)被覆盖之前的值</div><div class="line">         // 如果出现命名冲突或考虑到规范, 可通过_.noConflict()方法恢复"_"被Underscore占用之前的值, 并返回Underscore对象以便重新命名</div><div class="line">         var previousUnderscore = root._;</div><div class="line"></div><div class="line">         // 创建一个空的对象常量, 便于内部共享使用</div><div class="line">         var breaker = &#123;&#125;;</div><div class="line"></div><div class="line">         // 将内置对象的原型链缓存在局部变量, 方便快速调用</div><div class="line">         var ArrayProto = Array.prototype, //</div><div class="line">         ObjProto = Object.prototype, //</div><div class="line">         FuncProto = Function.prototype;</div><div class="line"></div><div class="line">         // 将内置对象原型中的常用方法缓存在局部变量, 方便快速调用</div><div class="line">         var slice = ArrayProto.slice, //</div><div class="line">         unshift = ArrayProto.unshift, //</div><div class="line">         toString = ObjProto.toString, //</div><div class="line">         hasOwnProperty = ObjProto.hasOwnProperty;</div><div class="line"></div><div class="line">         // 这里定义了一些JavaScript 1.6提供的新方法</div><div class="line">         // 如果宿主环境中支持这些方法则优先调用, 如果宿主环境中没有提供, 则会由Underscore实现</div><div class="line">         var nativeForEach = ArrayProto.forEach, //</div><div class="line">         nativeMap = ArrayProto.map, //</div><div class="line">         nativeReduce = ArrayProto.reduce, //</div><div class="line">         nativeReduceRight = ArrayProto.reduceRight, //</div><div class="line">         nativeFilter = ArrayProto.filter, //</div><div class="line">         nativeEvery = ArrayProto.every, //</div><div class="line">         nativeSome = ArrayProto.some, //</div><div class="line">         nativeIndexOf = ArrayProto.indexOf, //</div><div class="line">         nativeLastIndexOf = ArrayProto.lastIndexOf, //</div><div class="line">         nativeIsArray = Array.isArray, //</div><div class="line">         nativeKeys = Object.keys, //</div><div class="line">         nativeBind = FuncProto.bind;</div><div class="line"></div><div class="line">         // 创建对象式的调用方式, 将返回一个Underscore包装器, 包装器对象的原型中包含Underscore所有方法(类似与将DOM对象包装为一个jQuery对象)</div><div class="line">         var _ = function(obj) &#123;</div><div class="line">             // 所有Underscore对象在内部均通过wrapper对象进行构造</div><div class="line">             return new wrapper(obj);</div><div class="line">         &#125;;</div><div class="line">         // 针对不同的宿主环境, 将Undersocre的命名变量存放到不同的对象中</div><div class="line">         if( typeof exports !== 'undefined') &#123;// Node.js环境</div><div class="line">             if( typeof module !== 'undefined' &amp;&amp; module.exports) &#123;</div><div class="line">                 exports = module.exports = _;</div><div class="line">             &#125;</div><div class="line">             exports._ = _;</div><div class="line">         &#125; else &#123;// 浏览器环境中Underscore的命名变量被挂在window对象中</div><div class="line">             root['_'] = _;</div><div class="line">         &#125;</div><div class="line"></div><div class="line">         // 版本声明</div><div class="line">         _.VERSION = '1.3.3';</div><div class="line"></div><div class="line">         // 集合相关的方法(数据和对象的通用处理方法)</div><div class="line">         // --------------------</div><div class="line"></div><div class="line">         // 迭代处理器, 对集合中每一个元素执行处理器方法</div><div class="line">         var each = _.each = _.forEach = function(obj, iterator, context) &#123;</div><div class="line">             // 不处理空值</div><div class="line">             if(obj == null)</div><div class="line">                 return;</div><div class="line">             if(nativeForEach &amp;&amp; obj.forEach === nativeForEach) &#123;</div><div class="line">                 // 如果宿主环境支持, 则优先调用JavaScript 1.6提供的forEach方法</div><div class="line">                 obj.forEach(iterator, context);</div><div class="line">             &#125; else if(obj.length === +obj.length) &#123;</div><div class="line">                 // 对&lt;数组&gt;中每一个元素执行处理器方法</div><div class="line">                 for(var i = 0, l = obj.length; i &lt; l; i++) &#123;</div><div class="line">                     if( i in obj &amp;&amp; iterator.call(context, obj[i], i, obj) === breaker)</div><div class="line">                         return;</div><div class="line">                 &#125;</div><div class="line">             &#125; else &#123;</div><div class="line">                 // 对&lt;对象&gt;中每一个元素执行处理器方法</div><div class="line">                 for(var key in obj) &#123;</div><div class="line">                     if(_.has(obj, key)) &#123;</div><div class="line">                         if(iterator.call(context, obj[key], key, obj) === breaker)</div><div class="line">                             return;</div><div class="line">                     &#125;</div><div class="line">                 &#125;</div><div class="line">             &#125;</div><div class="line">         &#125;;</div><div class="line">         // 迭代处理器, 与each方法的差异在于map会存储每次迭代的返回值, 并作为一个新的数组返回</div><div class="line">         _.map = _.collect = function(obj, iterator, context) &#123;</div><div class="line">             // 用于存放返回值的数组</div><div class="line">             var results = [];</div><div class="line">             if(obj == null)</div><div class="line">                 return results;</div><div class="line">             // 优先调用宿主环境提供的map方法</div><div class="line">             if(nativeMap &amp;&amp; obj.map === nativeMap)</div><div class="line">                 return obj.map(iterator, context);</div><div class="line">             // 迭代处理集合中的元素</div><div class="line">             each(obj, function(value, index, list) &#123;</div><div class="line">                 // 将每次迭代处理的返回值存储到results数组</div><div class="line">                 results[results.length] = iterator.call(context, value, index, list);</div><div class="line">             &#125;);</div><div class="line">             // 返回处理结果</div><div class="line">             if(obj.length === +obj.length)</div><div class="line">                 results.length = obj.length;</div><div class="line">             return results;</div><div class="line">         &#125;;</div><div class="line">         // 将集合中每个元素放入迭代处理器, 并将本次迭代的返回值作为"memo"传递到下一次迭代, 一般用于累计结果或连接数据</div><div class="line">         _.reduce = _.foldl = _.inject = function(obj, iterator, memo, context) &#123;</div><div class="line">             // 通过参数数量检查是否存在初始值</div><div class="line">             var initial = arguments.length &gt; 2;</div><div class="line">             if(obj == null)</div><div class="line">                 obj = [];</div><div class="line">             // 优先调用宿主环境提供的reduce方法</div><div class="line">             if(nativeReduce &amp;&amp; obj.reduce === nativeReduce &amp;&amp; false) &#123;</div><div class="line">                 if(context)</div><div class="line">                     iterator = _.bind(iterator, context);</div><div class="line">                 return initial ? obj.reduce(iterator, memo) : obj.reduce(iterator);</div><div class="line">             &#125;</div><div class="line">             // 迭代处理集合中的元素</div><div class="line">             each(obj, function(value, index, list) &#123;</div><div class="line">                 if(!initial) &#123;</div><div class="line">                     // 如果没有初始值, 则将第一个元素作为初始值; 如果被处理的是对象集合, 则默认值为第一个属性的值</div><div class="line">                     memo = value;</div><div class="line">                     initial = true;</div><div class="line">                 &#125; else &#123;</div><div class="line">                     // 记录处理结果, 并将结果传递给下一次迭代</div><div class="line">                     memo = iterator.call(context, memo, value, index, list);</div><div class="line">                 &#125;</div><div class="line">             &#125;);</div><div class="line">             if(!initial)</div><div class="line">                 throw new TypeError('Reduce of empty array with no initial value');</div><div class="line">             return memo;</div><div class="line">         &#125;;</div><div class="line">         // 与reduce作用相似, 将逆向迭代集合中的元素(即从最后一个元素开始直到第一个元素)</div><div class="line">         _.reduceRight = _.foldr = function(obj, iterator, memo, context) &#123;</div><div class="line">             var initial = arguments.length &gt; 2;</div><div class="line">             if(obj == null)</div><div class="line">                 obj = [];</div><div class="line">             // 优先调用宿主环境提供的reduceRight方法</div><div class="line">             if(nativeReduceRight &amp;&amp; obj.reduceRight === nativeReduceRight) &#123;</div><div class="line">                 if(context)</div><div class="line">                     iterator = _.bind(iterator, context);</div><div class="line">                 return initial ? obj.reduceRight(iterator, memo) : obj.reduceRight(iterator);</div><div class="line">             &#125;</div><div class="line">             // 逆转集合中的元素顺序</div><div class="line">             var reversed = _.toArray(obj).reverse();</div><div class="line">             if(context &amp;&amp; !initial)</div><div class="line">                 iterator = _.bind(iterator, context);</div><div class="line">             // 通过reduce方法处理数据</div><div class="line">             return initial ? _.reduce(reversed, iterator, memo, context) : _.reduce(reversed, iterator);</div><div class="line">         &#125;;</div><div class="line">         // 遍历集合中的元素, 返回第一个能够通过处理器验证的元素</div><div class="line">         _.find = _.detect = function(obj, iterator, context) &#123;</div><div class="line">             // result存放第一个能够通过验证的元素</div><div class="line">             var result;</div><div class="line">             // 通过any方法遍历数据, 并记录通过验证的元素</div><div class="line">             // (如果是在迭代中检查处理器返回状态, 这里使用each方法会更合适)</div><div class="line">             any(obj, function(value, index, list) &#123;</div><div class="line">                 // 如果处理器返回的结果被转换为Boolean类型后值为true, 则当前记录并返回当前元素</div><div class="line">                 if(iterator.call(context, value, index, list)) &#123;</div><div class="line">                     result = value;</div><div class="line">                     return true;</div><div class="line">                 &#125;</div><div class="line">             &#125;);</div><div class="line">             return result;</div><div class="line">         &#125;;</div><div class="line">         // 与find方法作用类似, 但filter方法会记录下集合中所有通过验证的元素</div><div class="line">         _.filter = _.select = function(obj, iterator, context) &#123;</div><div class="line">             // 用于存储通过验证的元素数组</div><div class="line">             var results = [];</div><div class="line">             if(obj == null)</div><div class="line">                 return results;</div><div class="line">             // 优先调用宿主环境提供的filter方法</div><div class="line">             if(nativeFilter &amp;&amp; obj.filter === nativeFilter)</div><div class="line">                 return obj.filter(iterator, context);</div><div class="line">             // 迭代集合中的元素, 并将通过处理器验证的元素放到数组中并返回</div><div class="line">             each(obj, function(value, index, list) &#123;</div><div class="line">                 if(iterator.call(context, value, index, list))</div><div class="line">                     results[results.length] = value;</div><div class="line">             &#125;);</div><div class="line">             return results;</div><div class="line">         &#125;;</div><div class="line">         // 与filter方法作用相反, 即返回没有通过处理器验证的元素列表</div><div class="line">         _.reject = function(obj, iterator, context) &#123;</div><div class="line">             var results = [];</div><div class="line">             if(obj == null)</div><div class="line">                 return results;</div><div class="line">             each(obj, function(value, index, list) &#123;</div><div class="line">                 if(!iterator.call(context, value, index, list))</div><div class="line">                     results[results.length] = value;</div><div class="line">             &#125;);</div><div class="line">             return results;</div><div class="line">         &#125;;</div><div class="line">         // 如果集合中所有元素均能通过处理器验证, 则返回true</div><div class="line">         _.every = _.all = function(obj, iterator, context) &#123;</div><div class="line">             var result = true;</div><div class="line">             if(obj == null)</div><div class="line">                 return result;</div><div class="line">             // 优先调用宿主环境提供的every方法</div><div class="line">             if(nativeEvery &amp;&amp; obj.every === nativeEvery)</div><div class="line">                 return obj.every(iterator, context);</div><div class="line">             // 迭代集合中的元素</div><div class="line">             each(obj, function(value, index, list) &#123;</div><div class="line">                 // 这里理解为 result = (result &amp;&amp; iterator.call(context, value, index, list))</div><div class="line">                 // 验证处理器的结果被转换为Boolean类型后是否为true值</div><div class="line">                 if(!( result = result &amp;&amp; iterator.call(context, value, index, list)))</div><div class="line">                     return breaker;</div><div class="line">             &#125;);</div><div class="line">             return !!result;</div><div class="line">         &#125;;</div><div class="line">         // 检查集合中任何一个元素在被转换为Boolean类型时, 是否为true值?或者通过处理器处理后, 是否值为true?</div><div class="line">         var any = _.some = _.any = function(obj, iterator, context) &#123;</div><div class="line">             // 如果没有指定处理器参数, 则默认的处理器函数会返回元素本身, 并在迭代时通过将元素转换为Boolean类型来判断是否为true值</div><div class="line">             iterator || ( iterator = _.identity);</div><div class="line">             var result = false;</div><div class="line">             if(obj == null)</div><div class="line">                 return result;</div><div class="line">             // 优先调用宿主环境提供的some方法</div><div class="line">             if(nativeSome &amp;&amp; obj.some === nativeSome)</div><div class="line">                 return obj.some(iterator, context);</div><div class="line">             // 迭代集合中的元素</div><div class="line">             each(obj, function(value, index, list) &#123;</div><div class="line">                 if(result || ( result = iterator.call(context, value, index, list)))</div><div class="line">                     return breaker;</div><div class="line">             &#125;);</div><div class="line">             return !!result;</div><div class="line">         &#125;;</div><div class="line">         // 检查集合中是否有值与目标参数完全匹配(同时将匹配数据类型)</div><div class="line">         _.include = _.contains = function(obj, target) &#123;</div><div class="line">             var found = false;</div><div class="line">             if(obj == null)</div><div class="line">                 return found;</div><div class="line">             // 优先调用宿主环境提供的Array.prototype.indexOf方法</div><div class="line">             if(nativeIndexOf &amp;&amp; obj.indexOf === nativeIndexOf)</div><div class="line">                 return obj.indexOf(target) != -1;</div><div class="line">             // 通过any方法迭代集合中的元素, 验证元素的值和类型与目标是否完全匹配</div><div class="line">             found = any(obj, function(value) &#123;</div><div class="line">                 return value === target;</div><div class="line">             &#125;);</div><div class="line">             return found;</div><div class="line">         &#125;;</div><div class="line">         // 依次调用集合中所有元素的同名方法, 从第3个参数开始, 将被以此传入到元素的调用方法中</div><div class="line">         // 返回一个数组, 存储了所有方法的处理结果</div><div class="line">         _.invoke = function(obj, method) &#123;</div><div class="line">             // 调用同名方法时传递的参数(从第3个参数开始)</div><div class="line">             var args = slice.call(arguments, 2);</div><div class="line">             // 依次调用每个元素的方法, 并将结果放入数组中返回</div><div class="line">             return _.map(obj, function(value) &#123;</div><div class="line">                 return (_.isFunction(method) ? method || value : value[method]).apply(value, args);</div><div class="line">             &#125;);</div><div class="line">         &#125;;</div><div class="line">         // 遍历一个由对象列表组成的数组, 并返回每个对象中的指定属性的值列表</div><div class="line">         _.pluck = function(obj, key) &#123;</div><div class="line">             // 如果某一个对象中不存在该属性, 则返回undefined</div><div class="line">             return _.map(obj, function(value) &#123;</div><div class="line">                 return value[key];</div><div class="line">             &#125;);</div><div class="line">         &#125;;</div><div class="line">         // 返回集合中的最大值, 如果不存在可比较的值, 则返回undefined</div><div class="line">         _.max = function(obj, iterator, context) &#123;</div><div class="line">             // 如果集合是一个数组, 且没有使用处理器, 则使用Math.max获取最大值</div><div class="line">             // 一般会是在一个数组存储了一系列Number类型的数据</div><div class="line">             if(!iterator &amp;&amp; _.isArray(obj) &amp;&amp; obj[0] === +obj[0])</div><div class="line">                 return Math.max.apply(Math, obj);</div><div class="line">             // 对于空值, 直接返回负无穷大</div><div class="line">             if(!iterator &amp;&amp; _.isEmpty(obj))</div><div class="line">                 return -Infinity;</div><div class="line">             // 一个临时的对象, computed用于在比较过程中存储最大值(临时的)</div><div class="line">             var result = &#123;</div><div class="line">                 computed : -Infinity</div><div class="line">             &#125;;</div><div class="line">             // 迭代集合中的元素</div><div class="line">             each(obj, function(value, index, list) &#123;</div><div class="line">                 // 如果指定了处理器参数, 则比较的数据为处理器返回的值, 否则直接使用each遍历时的默认值</div><div class="line">                 var computed = iterator ? iterator.call(context, value, index, list) : value;</div><div class="line">                 // 如果比较值相比上一个值要大, 则将当前值放入result.value</div><div class="line">                 computed &gt;= result.computed &amp;&amp; ( result = &#123;</div><div class="line">                     value : value,</div><div class="line">                     computed : computed</div><div class="line">                 &#125;);</div><div class="line">             &#125;);</div><div class="line">             // 返回最大值</div><div class="line">             return result.value;</div><div class="line">         &#125;;</div><div class="line">         // 返回集合中的最小值, 处理过程与max方法一致</div><div class="line">         _.min = function(obj, iterator, context) &#123;</div><div class="line">             if(!iterator &amp;&amp; _.isArray(obj) &amp;&amp; obj[0] === +obj[0])</div><div class="line">                 return Math.min.apply(Math, obj);</div><div class="line">             if(!iterator &amp;&amp; _.isEmpty(obj))</div><div class="line">                 return Infinity;</div><div class="line">             var result = &#123;</div><div class="line">                 computed : Infinity</div><div class="line">             &#125;;</div><div class="line">             each(obj, function(value, index, list) &#123;</div><div class="line">                 var computed = iterator ? iterator.call(context, value, index, list) : value;</div><div class="line">                 computed &lt; result.computed &amp;&amp; ( result = &#123;</div><div class="line">                     value : value,</div><div class="line">                     computed : computed</div><div class="line">                 &#125;);</div><div class="line">             &#125;);</div><div class="line">             return result.value;</div><div class="line">         &#125;;</div><div class="line">         // 通过随机数, 让数组无须排列</div><div class="line">         _.shuffle = function(obj) &#123;</div><div class="line">             // shuffled变量存储处理过程及最终的结果数据</div><div class="line">             var shuffled = [], rand;</div><div class="line">             // 迭代集合中的元素</div><div class="line">             each(obj, function(value, index, list) &#123;</div><div class="line">                 // 生成一个随机数, 随机数在&lt;0-当前已处理的数量&gt;之间</div><div class="line">                 rand = Math.floor(Math.random() * (index + 1));</div><div class="line">                 // 将已经随机得到的元素放到shuffled数组末尾</div><div class="line">                 shuffled[index] = shuffled[rand];</div><div class="line">                 // 在前面得到的随机数的位置插入最新值</div><div class="line">                 shuffled[rand] = value;</div><div class="line">             &#125;);</div><div class="line">             // 返回一个数组, 该数组中存储了经过随机混排的集合元素</div><div class="line">             return shuffled;</div><div class="line">         &#125;;</div><div class="line">         // 对集合中元素, 按照特定的字段或值进行排列</div><div class="line">         // 相比Array.prototype.sort方法, sortBy方法支持对对象排序</div><div class="line">         _.sortBy = function(obj, val, context) &#123;</div><div class="line">             // val应该是对象的一个属性, 或一个处理器函数, 如果是一个处理器, 则应该返回需要进行比较的数据</div><div class="line">             var iterator = _.isFunction(val) ? val : function(obj) &#123;</div><div class="line">                 return obj[val];</div><div class="line">             &#125;;</div><div class="line">             // 调用顺序: _.pluck(_.map().sort());</div><div class="line">             // 调用_.map()方法遍历集合, 并将集合中的元素放到value节点, 将元素中需要进行比较的数据放到criteria属性中</div><div class="line">             // 调用sort()方法将集合中的元素按照criteria属性中的数据进行顺序排序</div><div class="line">             // 调用pluck获取排序后的对象集合并返回</div><div class="line">             return _.pluck(_.map(obj, function(value, index, list) &#123;</div><div class="line">                 return &#123;</div><div class="line">                     value : value,</div><div class="line">                     criteria : iterator.call(context, value, index, list)</div><div class="line">                 &#125;;</div><div class="line">             &#125;).sort(function(left, right) &#123;</div><div class="line">                 var a = left.criteria, b = right.criteria;</div><div class="line">                 if(a ===</div><div class="line">                     void 0)</div><div class="line">                     return 1;</div><div class="line">                 if(b ===</div><div class="line">                     void 0)</div><div class="line">                     return -1;</div><div class="line">                 return a &lt; b ? -1 : a &gt; b ? 1 : 0;</div><div class="line">             &#125;), 'value');</div><div class="line">         &#125;;</div><div class="line">         // 将集合中的元素, 按处理器返回的key分为多个数组</div><div class="line">         _.groupBy = function(obj, val) &#123;</div><div class="line">             var result = &#123;&#125;;</div><div class="line">             // val将被转换为进行分组的处理器函数, 如果val不是一个Function类型的数据, 则将被作为筛选元素时的key值</div><div class="line">             var iterator = _.isFunction(val) ? val : function(obj) &#123;</div><div class="line">                 return obj[val];</div><div class="line">             &#125;;</div><div class="line">             // 迭代集合中的元素</div><div class="line">             each(obj, function(value, index) &#123;</div><div class="line">                 // 将处理器的返回值作为key, 并将相同的key元素放到一个新的数组</div><div class="line">                 var key = iterator(value, index);</div><div class="line">                 (result[key] || (result[key] = [])).push(value);</div><div class="line">             &#125;);</div><div class="line">             // 返回已分组的数据</div><div class="line">             return result;</div><div class="line">         &#125;;</div><div class="line">         _.sortedIndex = function(array, obj, iterator) &#123;</div><div class="line">             iterator || ( iterator = _.identity);</div><div class="line">             var low = 0, high = array.length;</div><div class="line">             while(low &lt; high) &#123;</div><div class="line">                 var mid = (low + high) &gt;&gt; 1;</div><div class="line">                 iterator(array[mid]) &lt; iterator(obj) ? low = mid + 1 : high = mid;</div><div class="line">             &#125;</div><div class="line">             return low;</div><div class="line">         &#125;;</div><div class="line">         // 将一个集合转换一个数组并返回</div><div class="line">         // 一般用于将arguments转换为数组, 或将对象无序集合转换为数据形式的有序集合</div><div class="line">         _.toArray = function(obj) &#123;</div><div class="line">             if(!obj)</div><div class="line">                 return [];</div><div class="line">             if(_.isArray(obj))</div><div class="line">                 return slice.call(obj);</div><div class="line">             // 将arguments转换为数组</div><div class="line">             if(_.isArguments(obj))</div><div class="line">                 return slice.call(obj);</div><div class="line">             if(obj.toArray &amp;&amp; _.isFunction(obj.toArray))</div><div class="line">                 return obj.toArray();</div><div class="line">             // 将对象转换为数组, 数组中包含对象中所有属性的值列表(不包含对象原型链中的属性)</div><div class="line">             return _.values(obj);</div><div class="line">         &#125;;</div><div class="line">         // 计算集合中元素的数量</div><div class="line">         _.size = function(obj) &#123;</div><div class="line">             // 如果集合是一个数组, 则计算数组元素数量</div><div class="line">             // 如果集合是一个对象, 则计算对象中的属性数量(不包含对象原型链中的属性)</div><div class="line">             return _.isArray(obj) ? obj.length : _.keys(obj).length;</div><div class="line">         &#125;;</div><div class="line">         // 数组相关的方法</div><div class="line">         // ---------------</div><div class="line"></div><div class="line">         // 返回一个数组的第一个或順序指定的n个元素</div><div class="line">         _.first = _.head = _.take = function(array, n, guard) &#123;</div><div class="line">             // 如果没有指定参数n, 则返回第一个元素</div><div class="line">             // 如果指定了n, 则返回一个新的数组, 包含顺序指定数量n个元素</div><div class="line">             // guard参数用于确定只返回第一个元素, 当guard为true时, 指定数量n无效</div><div class="line">             return (n != null) &amp;&amp; !guard ? slice.call(array, 0, n) : array[0];</div><div class="line">         &#125;;</div><div class="line">         // 返回一个新数组, 包含除第一个元素外的其它元素, 或排除从最后一个元素开始向前指定n个元素</div><div class="line">         // 与first方法不同在于, first确定需要的元素在数组之前的位置, initial确定能排除的元素在数组最后的位置</div><div class="line">         _.initial = function(array, n, guard) &#123;</div><div class="line">             // 如果没有传递参数n, 则默认返回除最后一个元素外的其它元素</div><div class="line">             // 如果传递参数n, 则返回从最后一个元素开始向前的n个元素外的其它元素</div><div class="line">             // guard用于确定只返回一个元素, 当guard为true时, 指定数量n无效</div><div class="line">             return slice.call(array, 0, array.length - ((n == null) || guard ? 1 : n));</div><div class="line">         &#125;;</div><div class="line">         // 返回数组的最后一个或倒序指定的n个元素</div><div class="line">         _.last = function(array, n, guard) &#123;</div><div class="line">             if((n != null) &amp;&amp; !guard) &#123;</div><div class="line">                 // 计算并指定获取的元素位置n, 直到数组末尾, 作为一个新的数组返回</div><div class="line">                 return slice.call(array, Math.max(array.length - n, 0));</div><div class="line">             &#125; else &#123;</div><div class="line">                 // 如果没有指定数量, 或guard为true时, 只返回最后一个元素</div><div class="line">                 return array[array.length - 1];</div><div class="line">             &#125;</div><div class="line">         &#125;;</div><div class="line">         // 获取除了第一个或指定前n个元素外的其它元素</div><div class="line">         _.rest = _.tail = function(array, index, guard) &#123;</div><div class="line">             // 计算slice的第二个位置参数, 直到数组末尾</div><div class="line">             // 如果没有指定index, 或guard值为true, 则返回除第一个元素外的其它元素</div><div class="line">             // (index == null)值为true时, 作为参数传递给slice函数将被自动转换为1</div><div class="line">             return slice.call(array, (index == null) || guard ? 1 : index);</div><div class="line">         &#125;;</div><div class="line">         // 返回数组中所有值能被转换为true的元素, 返回一个新的数组</div><div class="line">         // 不能被转换的值包括 false, 0, '', null, undefined, NaN, 这些值将被转换为false</div><div class="line">         _.compact = function(array) &#123;</div><div class="line">             return _.filter(array, function(value) &#123;</div><div class="line">                 return !!value;</div><div class="line">             &#125;);</div><div class="line">         &#125;;</div><div class="line">         // 将一个多维数组合成为一维数组, 支持深层合并</div><div class="line">         // shallow参数用于控制合并深度, 当shallow为true时, 只合并第一层, 默认进行深层合并</div><div class="line">         _.flatten = function(array, shallow) &#123;</div><div class="line">             // 迭代数组中的每一个元素, 并将返回值作为demo传递给下一次迭代</div><div class="line">             return _.reduce(array, function(memo, value) &#123;</div><div class="line">                 // 如果元素依然是一个数组, 进行以下判断:</div><div class="line">                 // - 如果不进行深层合并, 则使用Array.prototype.concat将当前数组和之前的数据进行连接</div><div class="line">                 // - 如果支持深层合并, 则迭代调用flatten方法, 直到底层元素不再是数组类型</div><div class="line">                 if(_.isArray(value))</div><div class="line">                     return memo.concat( shallow ? value : _.flatten(value));</div><div class="line">                 // 数据(value)已经处于底层, 不再是数组类型, 则将数据合并到memo中并返回</div><div class="line">                 memo[memo.length] = value;</div><div class="line">                 return memo;</div><div class="line">             &#125;, []);</div><div class="line">         &#125;;</div><div class="line">         // 筛选并返回当前数组中与指定数据不相等的差异数据(可参考difference方法注释)</div><div class="line">         _.without = function(array) &#123;</div><div class="line">             return _.difference(array, slice.call(arguments, 1));</div><div class="line">         &#125;;</div><div class="line">         // 对数组中的数据进行去重(使用===进行比较)</div><div class="line">         // 当isSorted参数不为false时, 将依次对数组中的元素调用include方法, 检查相同元素是否已经被添加到返回值(数组)中</div><div class="line">         // 如果调用之前确保数组中数据按顺序排列, 则可以将isSorted设为true, 它将通过与最后一个元素进行对比来排除相同值, 使用isSorted效率会高于默认的include方式</div><div class="line">         // uniq方法默认将以数组中的数据进行对比, 如果声明iterator处理器, 则会根据处理器创建一个对比数组, 比较时以该数组中的数据为准, 但最终返回的唯一数据仍然是原始数组</div><div class="line">         _.uniq = _.unique = function(array, isSorted, iterator) &#123;</div><div class="line">             // 如果使用了iterator处理器, 则先将当前数组中的数据会先经过按迭代器处理, 并返回一个处理后的新数组</div><div class="line">             // 新数组用于作为比较的基准</div><div class="line">             var initial = iterator ? _.map(array, iterator) : array;</div><div class="line">             // 用于记录处理结果的临时数组</div><div class="line">             var results = [];</div><div class="line">             // 如果数组中只有2个值, 则不需要使用include方法进行比较, 将isSorted设置为true能提高运行效率</div><div class="line">             if(array.length &lt; 3)</div><div class="line">                 isSorted = true;</div><div class="line">             // 使用reduce方法迭代并累加处理结果</div><div class="line">             // initial变量是需要进行比较的基准数据, 它可能是原始数组, 也可能是处理器的结果集合(如果设置过iterator)</div><div class="line">             _.reduce(initial, function(memo, value, index) &#123;</div><div class="line">                 // 如果isSorted参数为true, 则直接使用===比较记录中的最后一个数据</div><div class="line">                 // 如果isSorted参数为false, 则使用include方法与集合中的每一个数据进行对比</div><div class="line">                 if( isSorted ? _.last(memo) !== value || !memo.length : !_.include(memo, value)) &#123;</div><div class="line">                     // memo记录了已经比较过的无重复数据</div><div class="line">                     // 根据iterator参数的状态, memo中记录的数据可能是原始数据, 也可能是处理器处理后的数据</div><div class="line">                     memo.push(value);</div><div class="line">                     // 处理结果数组中保存的始终为原始数组中的数据</div><div class="line">                     results.push(array[index]);</div><div class="line">                 &#125;</div><div class="line">                 return memo;</div><div class="line">             &#125;, []);</div><div class="line">             // 返回处理结果, 它只包含数组中无重复的数据</div><div class="line">             return results;</div><div class="line">         &#125;;</div><div class="line">         // union方法与uniq方法作用一致, 不同之处在于union允许在参数中传入多个数组</div><div class="line">         _.union = function() &#123;</div><div class="line">             // union对参数中的多个数组进行浅层合并为一个数组对象传递给uniq方法进行处理</div><div class="line">             return _.uniq(_.flatten(arguments, true));</div><div class="line">         &#125;;</div><div class="line">         // 获取当前数组与其它一个或多个数组的交集元素</div><div class="line">         // 从第二个参数开始为需要进行比较的一个或多个数组</div><div class="line">         _.intersection = _.intersect = function(array) &#123;</div><div class="line">             // rest变量记录需要进行比较的其它数组对象</div><div class="line">             var rest = slice.call(arguments, 1);</div><div class="line">             // 使用uniq方法去除当前数组中的重复数据, 避免重复计算</div><div class="line">             // 对当前数组的数据通过处理器进行过滤, 并返回符合条件(比较相同元素)的数据</div><div class="line">             return _.filter(_.uniq(array), function(item) &#123;</div><div class="line">                 // 使用every方法验证每一个数组中都包含了需要对比的数据</div><div class="line">                 // 如果所有数组中均包含对比数据, 则全部返回true, 如果任意一个数组没有包含该元素, 则返回false</div><div class="line">                 return _.every(rest, function(other) &#123;</div><div class="line">                     // other参数存储了每一个需要进行对比的数组</div><div class="line">                     // item存储了当前数组中需要进行对比的数据</div><div class="line">                     // 使用indexOf方法搜索数组中是否存在该元素(可参考indexOf方法注释)</div><div class="line">                     return _.indexOf(other, item) &gt;= 0;</div><div class="line">                 &#125;);</div><div class="line">             &#125;);</div><div class="line">         &#125;;</div><div class="line">         // 筛选并返回当前数组中与指定数据不相等的差异数据</div><div class="line">         // 该函数一般用于删除数组中指定的数据, 并得到删除后的新数组</div><div class="line">         // 该方法的作用与without相等, without方法参数形式上不允许数据被包含在数组中, 而difference方法参数形式上建议是数组(也可以和without使用相同形式的参数)</div><div class="line">         _.difference = function(array) &#123;</div><div class="line">             // 对第2个参数开始的所有参数, 作为一个数组进行合并(仅合并第一层, 而并非深层合并)</div><div class="line">             // rest变量存储验证数据, 在本方法中用于与原数据对比</div><div class="line">             var rest = _.flatten(slice.call(arguments, 1), true);</div><div class="line">             // 对合并后的数组数据进行过滤, 过滤条件是当前数组中不包含参数指定的验证数据的内容</div><div class="line">             // 将符合过滤条件的数据组合为一个新的数组并返回</div><div class="line">             return _.filter(array, function(value) &#123;</div><div class="line">                 return !_.include(rest, value);</div><div class="line">             &#125;);</div><div class="line">         &#125;;</div><div class="line">         // 将每个数组的相同位置的数据作为一个新的二维数组返回, 返回的数组长度以传入参数中最大的数组长度为准, 其它数组的空白位置使用undefined填充</div><div class="line">         // zip方法应该包含多个参数, 且每个参数应该均为数组</div><div class="line">         _.zip = function() &#123;</div><div class="line">             // 将参数转换为数组, 此时args是一个二维数组</div><div class="line">             var args = slice.call(arguments);</div><div class="line">             // 计算每一个数组的长度, 并返回其中最大长度值</div><div class="line">             var length = _.max(_.pluck(args, 'length'));</div><div class="line">             // 依照最大长度值创建一个新的空数组, 该数组用于存储处理结果</div><div class="line">             var results = new Array(length);</div><div class="line">             // 循环最大长度, 在每次循环将调用pluck方法获取每个数组中相同位置的数据(依次从0到最后位置)</div><div class="line">             // 将获取到的数据存储在一个新的数组, 放入results并返回</div><div class="line">             for(var i = 0; i &lt; length; i++)</div><div class="line">             results[i] = _.pluck(args, "" + i);</div><div class="line">             // 返回的结果是一个二维数组</div><div class="line">             return results;</div><div class="line">         &#125;;</div><div class="line">         // 搜索一个元素在数组中首次出现的位置, 如果元素不存在则返回 -1</div><div class="line">         // 搜索时使用 === 对元素进行匹配</div><div class="line">         _.indexOf = function(array, item, isSorted) &#123;</div><div class="line">             if(array == null)</div><div class="line">                 return -1;</div><div class="line">             var i, l;</div><div class="line">             if(isSorted) &#123;</div><div class="line">                 i = _.sortedIndex(array, item);</div><div class="line">                 return array[i] === item ? i : -1;</div><div class="line">             &#125;</div><div class="line">             // 优先调用宿主环境提供的indexOf方法</div><div class="line">             if(nativeIndexOf &amp;&amp; array.indexOf === nativeIndexOf)</div><div class="line">                 return array.indexOf(item);</div><div class="line">             // 循环并返回元素首次出现的位置</div><div class="line">             for( i = 0, l = array.length; i &lt; l; i++)</div><div class="line">             if( i in array &amp;&amp; array[i] === item)</div><div class="line">                 return i;</div><div class="line">             // 没有找到元素, 返回-1</div><div class="line">             return -1;</div><div class="line">         &#125;;</div><div class="line">         // 返回一个元素在数组中最后一次出现的位置, 如果元素不存在则返回 -1</div><div class="line">         // 搜索时使用 === 对元素进行匹配</div><div class="line">         _.lastIndexOf = function(array, item) &#123;</div><div class="line">             if(array == null)</div><div class="line">                 return -1;</div><div class="line">             // 优先调用宿主环境提供的lastIndexOf方法</div><div class="line">             if(nativeLastIndexOf &amp;&amp; array.lastIndexOf === nativeLastIndexOf)</div><div class="line">                 return array.lastIndexOf(item);</div><div class="line">             var i = array.length;</div><div class="line">             // 循环并返回元素最后出现的位置</div><div class="line">             while(i--)</div><div class="line">             if( i in array &amp;&amp; array[i] === item)</div><div class="line">                 return i;</div><div class="line">             // 没有找到元素, 返回-1</div><div class="line">             return -1;</div><div class="line">         &#125;;</div><div class="line">         // 根据区间和步长, 生成一系列整数, 并作为数组返回</div><div class="line">         // start参数表示最小数</div><div class="line">         // stop参数表示最大数</div><div class="line">         // step参数表示生成多个数值之间的步长值</div><div class="line">         _.range = function(start, stop, step) &#123;</div><div class="line">             // 参数控制</div><div class="line">             if(arguments.length &lt;= 1) &#123;</div><div class="line">                 // 如果没有参数, 则start = 0, stop = 0, 在循环中不会生成任何数据, 将返回一个空数组</div><div class="line">                 // 如果有1个参数, 则参数指定给stop, start = 0</div><div class="line">                 stop = start || 0;</div><div class="line">                 start = 0;</div><div class="line">             &#125;</div><div class="line">             // 生成整数的步长值, 默认为1</div><div class="line">             step = arguments[2] || 1;</div><div class="line"></div><div class="line">             // 根据区间和步长计算将生成的最大值</div><div class="line">             var len = Math.max(Math.ceil((stop - start) / step), 0);</div><div class="line">             var idx = 0;</div><div class="line">             var range = new Array(len);</div><div class="line"></div><div class="line">             // 生成整数列表, 并存储到range数组</div><div class="line">             while(idx &lt; len) &#123;</div><div class="line">                 range[idx++] = start;</div><div class="line">                 start += step;</div><div class="line">             &#125;</div><div class="line"></div><div class="line">             // 返回列表结果</div><div class="line">             return range;</div><div class="line">         &#125;;</div><div class="line">         // 函数相关方法</div><div class="line">         // ------------------</div><div class="line"></div><div class="line">         // 创建一个用于设置prototype的公共函数对象</div><div class="line">         var ctor = function() &#123;</div><div class="line">         &#125;;</div><div class="line">         // 为一个函数绑定执行上下文, 任何情况下调用该函数, 函数中的this均指向context对象</div><div class="line">         // 绑定函数时, 可以同时给函数传递调用形参</div><div class="line">         _.bind = function bind(func, context) &#123;</div><div class="line">             var bound, args;</div><div class="line">             // 优先调用宿主环境提供的bind方法</div><div class="line">             if(func.bind === nativeBind &amp;&amp; nativeBind)</div><div class="line">                 return nativeBind.apply(func, slice.call(arguments, 1));</div><div class="line">             // func参数必须是一个函数(Function)类型</div><div class="line">             if(!_.isFunction(func))</div><div class="line">                 throw new TypeError;</div><div class="line">             // args变量存储了bind方法第三个开始的参数列表, 每次调用时都将传递给func函数</div><div class="line">             args = slice.call(arguments, 2);</div><div class="line">             return bound = function() &#123;</div><div class="line">                 if(!(this instanceof bound))</div><div class="line">                     return func.apply(context, sargs.concat(slice.call(arguments)));</div><div class="line">                 ctor.prototype = func.prototype;</div><div class="line">                 var self = new ctor;</div><div class="line">                 var result = func.apply(self, args.concat(slice.call(arguments)));</div><div class="line">                 if(Object(result) === result)</div><div class="line">                     return result;</div><div class="line">                 return self;</div><div class="line">             &#125;;</div><div class="line">         &#125;;</div><div class="line">         // 将指定的函数, 或对象本身的所有函数上下本绑定到对象本身, 被绑定的函数在被调用时, 上下文对象始终指向对象本身</div><div class="line">         // 该方法一般在处理对象事件时使用, 例如:</div><div class="line">         // _(obj).bindAll(); // 或_(obj).bindAll('handlerClick');</div><div class="line">         // document.addEventListener('click', obj.handlerClick);</div><div class="line">         // 在handlerClick方法中, 上下文依然是obj对象</div><div class="line">         _.bindAll = function(obj) &#123;</div><div class="line">             // 第二个参数开始表示需要绑定的函数名称</div><div class="line">             var funcs = slice.call(arguments, 1);</div><div class="line">             // 如果没有指定特定的函数名称, 则默认绑定对象本身所有类型为Function的属性</div><div class="line">             if(funcs.length == 0)</div><div class="line">                 funcs = _.functions(obj);</div><div class="line">             // 循环并将所有的函数上下本设置为obj对象本身</div><div class="line">             // each方法本身不会遍历对象原型链中的方法, 但此处的funcs列表是通过_.functions方法获取的, 它已经包含了原型链中的方法</div><div class="line">             each(funcs, function(f) &#123;</div><div class="line">                 obj[f] = _.bind(obj[f], obj);</div><div class="line">             &#125;);</div><div class="line">             return obj;</div><div class="line">         &#125;;</div><div class="line">         // memoize方法将返回一个函数, 该函数集成了缓存功能, 将经过计算的值缓存到局部变量并在下次调用时直接返回</div><div class="line">         // 如果计算结果是一个庞大的对象或数据, 使用时应该考虑内存占用情况</div><div class="line">         _.memoize = function(func, hasher) &#123;</div><div class="line">             // 用于存储缓存结果的memo对象</div><div class="line">             var memo = &#123;&#125;;</div><div class="line">             // hasher参数应该是一个function, 它用于返回一个key, 该key作为读取缓存的标识</div><div class="line">             // 如果没有指定key, 则默认使用函数的第一个参数作为key, 如果函数的第一个参数是复合数据类型, 可能会返回类似[Object object]的key, 这个key可能会造成后续计算的数据不正确</div><div class="line">             hasher || ( hasher = _.identity);</div><div class="line">             // 返回一个函数, 该函数首先通过检查缓存, 再对没有缓存过的数据进行调用</div><div class="line">             return function() &#123;</div><div class="line">                 var key = hasher.apply(this, arguments);</div><div class="line">                 return _.has(memo, key) ? memo[key] : (memo[key] = func.apply(this, arguments));</div><div class="line">             &#125;;</div><div class="line">         &#125;;</div><div class="line">         // 延时执行一个函数</div><div class="line">         // wait单位为ms, 第3个参数开始将被依次传递给执行函数</div><div class="line">         _.delay = function(func, wait) &#123;</div><div class="line">             var args = slice.call(arguments, 2);</div><div class="line">             return setTimeout(function() &#123;</div><div class="line">                 return func.apply(null, args);</div><div class="line">             &#125;, wait);</div><div class="line">         &#125;;</div><div class="line">         // 延迟执行函数</div><div class="line">         // JavaScript中的setTimeout会被放到一个单独的函数堆栈中执行, 执行时间是在当前堆栈中调用的函数都被执行完毕之后</div><div class="line">         // defer设置函数在1ms后执行, 目的是将func函数放到单独的堆栈中, 等待当前函数执行完成后再执行</div><div class="line">         // defer方法一般用于处理DOM操作的优先级, 实现正确的逻辑流程和更流畅的交互体验</div><div class="line">         _.defer = function(func) &#123;</div><div class="line">             return _.delay.apply(_, [func, 1].concat(slice.call(arguments, 1)));</div><div class="line">         &#125;;</div><div class="line">         // 函数节流方法, throttle方法主要用于控制函数的执行频率, 在被控制的时间间隔内, 频繁调用函数不会被多次执行</div><div class="line">         // 在时间间隔内如果多次调用了函数, 时间隔截止时会自动调用一次, 不需要等到时间截止后再手动调用(自动调用时不会有返回值)</div><div class="line">         // throttle函数一般用于处理复杂和调用频繁的函数, 通过节流控制函数的调用频率, 节省处理资源</div><div class="line">         // 例如window.onresize绑定的事件函数, 或element.onmousemove绑定的事件函数, 可以用throttle进行包装</div><div class="line">         // throttle方法返回一个函数, 该函数会自动调用func并进行节流控制</div><div class="line">         _.throttle = function(func, wait) &#123;</div><div class="line">             var context, args, timeout, throttling, more, result;</div><div class="line">             // whenDone变量调用了debounce方法, 因此在多次连续调用函数时, 最后一次调用会覆盖之前调用的定时器, 清除状态函数也仅会被执行一次</div><div class="line">             // whenDone函数在最后一次函数执行的时间间隔截止时调用, 清除节流和调用过程中记录的一些状态</div><div class="line">             var whenDone = _.debounce(function() &#123;</div><div class="line">                 more = throttling = false;</div><div class="line">             &#125;, wait);</div><div class="line">             // 返回一个函数, 并在函数内进行节流控制</div><div class="line">             return function() &#123;</div><div class="line">                 // 保存函数的执行上下文和参数</div><div class="line">                 context = this;</div><div class="line">                 args = arguments;</div><div class="line">                 // later函数在上一次函数调用时间间隔截止时执行</div><div class="line">                 var later = function() &#123;</div><div class="line">                     // 清除timeout句柄, 方便下一次函数调用</div><div class="line">                     timeout = null;</div><div class="line">                     // more记录了在上一次调用至时间间隔截止之间, 是否重复调用了函数</div><div class="line">                     // 如果重复调用了函数, 在时间间隔截止时将自动再次调用函数</div><div class="line">                     if(more)</div><div class="line">                         func.apply(context, args);</div><div class="line">                     // 调用whenDone, 用于在时间间隔后清除节流状态</div><div class="line">                     whenDone();</div><div class="line">                 &#125;;</div><div class="line">                 // timeout记录了上一次函数执行的时间间隔句柄</div><div class="line">                 // timeout时间间隔截止时调用later函数, later中将清除timeout, 并检查是否需要再次调用函数</div><div class="line">                 if(!timeout)</div><div class="line">                     timeout = setTimeout(later, wait);</div><div class="line">                 // throttling变量记录上次调用的时间间隔是否已经结束, 即是否处于节流过程中</div><div class="line">                 // throttling在每次函数调用时设为true, 表示需要进行节流, 在时间间隔截止时设置为false(在whenDone函数中实现)</div><div class="line">                 if(throttling) &#123;</div><div class="line">                     // 节流过程中进行了多次调用, 在more中记录一个状态, 表示在时间间隔截止时需要再次自动调用函数</div><div class="line">                     more = true;</div><div class="line">                 &#125; else &#123;</div><div class="line">                     // 没有处于节流过程, 可能是第一次调用函数, 或已经超过上一次调用的间隔, 可以直接调用函数</div><div class="line">                     result = func.apply(context, args);</div><div class="line">                 &#125;</div><div class="line">                 // 调用whenDone, 用于在时间间隔后清除节流状态</div><div class="line">                 whenDone();</div><div class="line">                 // throttling变量记录函数调用时的节流状态</div><div class="line">                 throttling = true;</div><div class="line">                 // 返回调用结果</div><div class="line">                 return result;</div><div class="line">             &#125;;</div><div class="line">         &#125;;</div><div class="line">         // debounce与throttle方法类似, 用于函数节流, 它们的不同之处在于:</div><div class="line">         // -- throttle关注函数的执行频率, 在指定频率内函数只会被执行一次;</div><div class="line">         // -- debounce函数更关注函数执行的间隔, 即函数两次的调用时间不能小于指定时间;</div><div class="line">         // 如果两次函数的执行间隔小于wait, 定时器会被清除并重新创建, 这意味着连续频繁地调用函数, 函数一直不会被执行, 直到某一次调用与上一次调用的时间不小于wait毫秒</div><div class="line">         // debounce函数一般用于控制需要一段时间之后才能执行的操作, 例如在用户输入完毕200ms后提示用户, 可以使用debounce包装一个函数, 绑定到onkeyup事件</div><div class="line">         // ----------------------------------------------------------------</div><div class="line">         // @param &#123;Function&#125; func 表示被执行的函数</div><div class="line">         // @param &#123;Number&#125; wait 表示允许的时间间隔, 在该时间范围内重复调用会被重新推迟wait毫秒</div><div class="line">         // @param &#123;Boolean&#125; immediate 表示函数调用后是否立即执行, true为立即调用, false为在时间截止时调用</div><div class="line">         // debounce方法返回一个函数, 该函数会自动调用func并进行节流控制</div><div class="line">         _.debounce = function(func, wait, immediate) &#123;</div><div class="line">             // timeout用于记录函数上一次调用的执行状态(定时器句柄)</div><div class="line">             // 当timeout为null时, 表示上一次调用已经结束</div><div class="line">             var timeout;</div><div class="line">             // 返回一个函数, 并在函数内进行节流控制</div><div class="line">             return function() &#123;</div><div class="line">                 // 保持函数的上下文对象和参数</div><div class="line">                 var context = this, args = arguments;</div><div class="line">                 var later = function() &#123;</div><div class="line">                     // 设置timeout为null</div><div class="line">                     // later函数会在允许的时间截止时被调用</div><div class="line">                     // 调用该函数时, 表明上一次函数执行时间已经超过了约定的时间间隔, 此时之后再进行调用都是被允许的</div><div class="line">                     timeout = null;</div><div class="line">                     if(!immediate)</div><div class="line">                         func.apply(context, args);</div><div class="line">                 &#125;;</div><div class="line">                 // 如果函数被设定为立即执行, 且上一次调用的时间间隔已经过去, 则立即调用函数</div><div class="line">                 if(immediate &amp;&amp; !timeout)</div><div class="line">                     func.apply(context, args);</div><div class="line">                 // 创建一个定时器用于检查和设置函数的调用状态</div><div class="line">                 // 创建定时器之前先清空上一次setTimeout句柄, 无论上一次绑定的函数是否已经被执行</div><div class="line">                 // 如果本次函数在调用时, 上一次函数执行还没有开始(一般是immediate设置为false时), 则函数的执行时间会被推迟, 因此timeout句柄会被重新创建</div><div class="line">                 clearTimeout(timeout);</div><div class="line">                 // 在允许的时间截止时调用later函数</div><div class="line">                 timeout = setTimeout(later, wait);</div><div class="line">             &#125;;</div><div class="line">         &#125;;</div><div class="line">         // 创建一个只会被执行一次的函数, 如果该函数被重复调用, 将返回第一次执行的结果</div><div class="line">         // 该函数用于获取和计算固定数据的逻辑, 如获取用户所用的浏览器类型</div><div class="line">         _.once = function(func) &#123;</div><div class="line">             // ran记录函数是否被执行过</div><div class="line">             // memo记录函数最后一次执行的结果</div><div class="line">             var ran = false, memo;</div><div class="line">             return function() &#123;</div><div class="line">                 // 如果函数已被执行过, 则直接返回第一次执行的结果</div><div class="line">                 if(ran)</div><div class="line">                     return memo;</div><div class="line">                 ran = true;</div><div class="line">                 return memo = func.apply(this, arguments);</div><div class="line">             &#125;;</div><div class="line">         &#125;;</div><div class="line">         // 返回一个函数, 该函数会将当前函数作为参数传递给一个包裹函数</div><div class="line">         // 在包裹函数中可以通过第一个参数调用当前函数, 并返回结果</div><div class="line">         // 一般用于多个流程处理函数的低耦合组合调用</div><div class="line">         _.wrap = function(func, wrapper) &#123;</div><div class="line">             return function() &#123;</div><div class="line">                 // 将当前函数作为第一个参数, 传递给wrapper函数</div><div class="line">                 var args = [func].concat(slice.call(arguments, 0));</div><div class="line">                 // 返回wrapper函数的处理结果</div><div class="line">                 return wrapper.apply(this, args);</div><div class="line">             &#125;;</div><div class="line">         &#125;;</div><div class="line">         // 将多个函数组合到一起, 按照参数传递的顺序, 后一个函数的返回值会被一次作为参数传递给前一个函数作为参数继续处理</div><div class="line">         // _.compose(A, B, C); 等同于 A(B(C()));</div><div class="line">         // 该方法的缺点在于被关联的函数处理的参数数量只能有一个, 如果需要传递多个参数, 可以通过Array或Object复合数据类型进行组装</div><div class="line">         _.compose = function() &#123;</div><div class="line">             // 获取函数列表, 所有参数需均为Function类型</div><div class="line">             var funcs = arguments;</div><div class="line">             // 返回一个供调用的函数句柄</div><div class="line">             return function() &#123;</div><div class="line">                 // 从后向前依次执行函数, 并将记录的返回值作为参数传递给前一个函数继续处理</div><div class="line">                 var args = arguments;</div><div class="line">                 for(var i = funcs.length - 1; i &gt;= 0; i--) &#123;</div><div class="line">                     args = [funcs[i].apply(this, args)];</div><div class="line">                 &#125;</div><div class="line">                 // 返回最后一次调用函数的返回值</div><div class="line">                 return args[0];</div><div class="line">             &#125;;</div><div class="line">         &#125;;</div><div class="line">         // 返回一个函数, 该函数作为调用计数器, 当该函数被调用times次(或超过times次)后, func函数将被执行</div><div class="line">         // after方法一般用作异步的计数器, 例如在多个AJAX请求全部完成后需要执行一个函数, 则可以使用after在每个AJAX请求完成后调用</div><div class="line">         _.after = function(times, func) &#123;</div><div class="line">             // 如果没有指定或指定无效次数, 则func被直接调用</div><div class="line">             if(times &lt;= 0)</div><div class="line">                 return func();</div><div class="line">             // 返回一个计数器函数</div><div class="line">             return function() &#123;</div><div class="line">                 // 每次调用计数器函数times减1, 调用times次之后执行func函数并返回func函数的返回值</div><div class="line">                 if(--times &lt; 1) &#123;</div><div class="line">                     return func.apply(this, arguments);</div><div class="line">                 &#125;</div><div class="line">             &#125;;</div><div class="line">         &#125;;</div><div class="line">         // 对象相关方法</div><div class="line">         // ----------------</div><div class="line"></div><div class="line">         // 获取一个对象的属性名列表(不包含原型链中的属性)</div><div class="line">         _.keys = nativeKeys ||</div><div class="line">         function(obj) &#123;</div><div class="line">             if(obj !== Object(obj))</div><div class="line">                 throw new TypeError('Invalid object');</div><div class="line">             var keys = [];</div><div class="line">             // 记录并返回对象的所有属性名</div><div class="line">             for(var key in obj)</div><div class="line">             if(_.has(obj, key))</div><div class="line">                 keys[keys.length] = key;</div><div class="line">             return keys;</div><div class="line">         &#125;;</div><div class="line"></div><div class="line">         // 返回一个对象中所有属性的值列表(不包含原型链中的属性)</div><div class="line">         _.values = function(obj) &#123;</div><div class="line">             return _.map(obj, _.identity);</div><div class="line">         &#125;;</div><div class="line">         // 获取一个对象中所有属性值为Function类型的key列表, 并按key名进行排序(包含原型链中的属性)</div><div class="line">         _.functions = _.methods = function(obj) &#123;</div><div class="line">             var names = [];</div><div class="line">             for(var key in obj) &#123;</div><div class="line">                 if(_.isFunction(obj[key]))</div><div class="line">                     names.push(key);</div><div class="line">             &#125;</div><div class="line">             return names.sort();</div><div class="line">         &#125;;</div><div class="line">         // 将一个或多个对象的属性(包含原型链中的属性), 复制到obj对象, 如果存在同名属性则覆盖</div><div class="line">         _.extend = function(obj) &#123;</div><div class="line">             // each循环参数中的一个或多个对象</div><div class="line">             each(slice.call(arguments, 1), function(source) &#123;</div><div class="line">                 // 将对象中的全部属性复制或覆盖到obj对象</div><div class="line">                 for(var prop in source) &#123;</div><div class="line">                     obj[prop] = source[prop];</div><div class="line">                 &#125;</div><div class="line">             &#125;);</div><div class="line">             return obj;</div><div class="line">         &#125;;</div><div class="line">         // 返回一个新对象, 并从obj中复制指定的属性到新对象中</div><div class="line">         // 第2个参数开始为指定的需要复制的属性名(支持多个参数和深层数组)</div><div class="line">         _.pick = function(obj) &#123;</div><div class="line">             // 创建一个对象, 存放复制的指定属性</div><div class="line">             var result = &#123;&#125;;</div><div class="line">             // 从第二个参数开始合并为一个存放属性名列表的数组</div><div class="line">             each(_.flatten(slice.call(arguments, 1)), function(key) &#123;</div><div class="line">                 // 循环属性名列表, 如果obj中存在该属性, 则将其复制到result对象</div><div class="line">                 if( key in obj)</div><div class="line">                     result[key] = obj[key];</div><div class="line">             &#125;);</div><div class="line">             // 返回复制结果</div><div class="line">             return result;</div><div class="line">         &#125;;</div><div class="line">         // 将obj中不存在或转换为Boolean类型后值为false的属性, 从参数中指定的一个或多个对象中复制到obj</div><div class="line">         // 一般用于给对象指定默认值</div><div class="line">         _.defaults = function(obj) &#123;</div><div class="line">             // 从第二个参数开始可指定多个对象, 这些对象中的属性将被依次复制到obj对象中(如果obj对象中不存在该属性的话)</div><div class="line">             each(slice.call(arguments, 1), function(source) &#123;</div><div class="line">                 // 遍历每个对象中的所有属性</div><div class="line">                 for(var prop in source) &#123;</div><div class="line">                     // 如果obj中不存在或属性值转换为Boolean类型后值为false, 则将属性复制到obj中</div><div class="line">                     if(obj[prop] == null)</div><div class="line">                         obj[prop] = source[prop];</div><div class="line">                 &#125;</div><div class="line">             &#125;);</div><div class="line">             return obj;</div><div class="line">         &#125;;</div><div class="line">         // 创建一个obj的副本, 返回一个新的对象, 该对象包含obj中的所有属性和值的状态</div><div class="line">         // clone函数不支持深层复制, 例如obj中的某个属性存放着一个对象, 则该对象不会被复制</div><div class="line">         // 如果obj是一个数组, 则会创建一个相同的数组对象</div><div class="line">         _.clone = function(obj) &#123;</div><div class="line">             // 不支持非数组和对象类型的数据</div><div class="line">             if(!_.isObject(obj))</div><div class="line">                 return obj;</div><div class="line">             // 复制并返回数组或对象</div><div class="line">             return _.isArray(obj) ? obj.slice() : _.extend(&#123;&#125;, obj);</div><div class="line">         &#125;;</div><div class="line">         // 执行一个函数, 并将obj作为参数传递给该函数, 函数执行完毕后最终返回obj对象</div><div class="line">         // 一般在创建一个方法链的时候会使用tap方法, 例如:</div><div class="line">         // _(obj).chain().tap(click).tap(mouseover).tap(mouseout);</div><div class="line">         _.tap = function(obj, interceptor) &#123;</div><div class="line">             interceptor(obj);</div><div class="line">             return obj;</div><div class="line">         &#125;;</div><div class="line">         // eq函数只在isEqual方法中调用, 用于比较两个数据的值是否相等</div><div class="line">         // 与 === 不同在于, eq更关注数据的值</div><div class="line">         // 如果进行比较的是两个复合数据类型, 不仅仅比较是否来自同一个引用, 且会进行深层比较(对两个对象的结构和数据进行比较)</div><div class="line">         function eq(a, b, stack) &#123;</div><div class="line">             // 检查两个简单数据类型的值是否相等</div><div class="line">             // 对于复合数据类型, 如果它们来自同一个引用, 则认为其相等</div><div class="line">             // 如果被比较的值其中包含0, 则检查另一个值是否为-0, 因为 0 === -0 是成立的</div><div class="line">             // 而 1 / 0 == 1 / -0 是不成立的(1 / 0值为Infinity, 1 / -0值为-Infinity, 而Infinity不等于-Infinity)</div><div class="line">             if(a === b)</div><div class="line">                 return a !== 0 || 1 / a == 1 / b;</div><div class="line">             // 将数据转换为布尔类型后如果值为false, 将判断两个值的数据类型是否相等(因为null与undefined, false, 0, 空字符串, 在非严格比较下值是相等的)</div><div class="line">             if(a == null || b == null)</div><div class="line">                 return a === b;</div><div class="line">             // 如果进行比较的数据是一个Underscore封装的对象(具有_chain属性的对象被认为是Underscore对象)</div><div class="line">             // 则将对象解封后获取本身的数据(通过_wrapped访问), 然后再对本身的数据进行比较</div><div class="line">             // 它们的关系类似与一个jQuery封装的DOM对象, 和浏览器本身创建的DOM对象</div><div class="line">             if(a._chain)</div><div class="line">                 a = a._wrapped;</div><div class="line">             if(b._chain)</div><div class="line">                 b = b._wrapped;</div><div class="line">             // 如果对象提供了自定义的isEqual方法(此处的isEqual方法并非Undersocre对象的isEqual方法, 因为在上一步已经对Undersocre对象进行了解封)</div><div class="line">             // 则使用对象自定义的isEqual方法与另一个对象进行比较</div><div class="line">             if(a.isEqual &amp;&amp; _.isFunction(a.isEqual))</div><div class="line">                 return a.isEqual(b);</div><div class="line">             if(b.isEqual &amp;&amp; _.isFunction(b.isEqual))</div><div class="line">                 return b.isEqual(a);</div><div class="line">             // 对两个数据的数据类型进行验证</div><div class="line">             // 获取对象a的数据类型(通过Object.prototype.toString方法)</div><div class="line">             var className = toString.call(a);</div><div class="line">             // 如果对象a的数据类型与对象b不匹配, 则认为两个数据值也不匹配</div><div class="line">             if(className != toString.call(b))</div><div class="line">                 return false;</div><div class="line">             // 执行到此处, 可以确保需要比较的两个数据均为复合数据类型, 且数据类型相等</div><div class="line">             // 通过switch检查数据的数据类型, 针对不同数据类型进行不同的比较</div><div class="line">             // (此处不包括对数组和对象类型, 因为它们可能包含更深层次的数据, 将在后面进行深层比较)</div><div class="line">             switch (className) &#123;</div><div class="line">                 case '[object String]':</div><div class="line">                     // 如果被比较的是字符串类型(其中a的是通过new String()创建的字符串)</div><div class="line">                     // 则将B转换为String对象后进行匹配(这里匹配并非进行严格的数据类型检查, 因为它们并非来自同一个对象的引用)</div><div class="line">                     // 在调用 == 进行比较时, 会自动调用对象的toString()方法, 返回两个简单数据类型的字符串</div><div class="line">                     return a == String(b);</div><div class="line">                 case '[object Number]':</div><div class="line">                     // 通过+a将a转成一个Number, 如果a被转换之前与转换之后不相等, 则认为a是一个NaN类型</div><div class="line">                     // 因为NaN与NaN是不相等的, 因此当a值为NaN时, 无法简单地使用a == b进行匹配, 而是用相同的方法检查b是否为NaN(即 b != +b)</div><div class="line">                     // 当a值是一个非NaN的数据时, 则检查a是否为0, 因为当b为-0时, 0 === -0是成立的(实际上它们在逻辑上属于两个不同的数据)</div><div class="line">                     return a != +a ? b != +b : (a == 0 ? 1 / a == 1 / b : a == +b);</div><div class="line">                 case '[object Date]':</div><div class="line">                 // 对日期类型没有使用return或break, 因此会继续执行到下一步(无论数据类型是否为Boolean类型, 因为下一步将对Boolean类型进行检查)</div><div class="line">                 case '[object Boolean]':</div><div class="line">                     // 将日期或布尔类型转换为数字</div><div class="line">                     // 日期类型将转换为数值类型的时间戳(无效的日期格式将被换转为NaN)</div><div class="line">                     // 布尔类型中, true被转换为1, false被转换为0</div><div class="line">                     // 比较两个日期或布尔类型被转换为数字后是否相等</div><div class="line">                     return +a == +b;</div><div class="line">                 case '[object RegExp]':</div><div class="line">                     // 正则表达式类型, 通过source访问表达式的字符串形式</div><div class="line">                     // 检查两个表达式的字符串形式是否相等</div><div class="line">                     // 检查两个表达式的全局属性是否相同(包括g, i, m)</div><div class="line">                     // 如果完全相等, 则认为两个数据相等</div><div class="line">                     return a.source == b.source &amp;&amp; a.global == b.global &amp;&amp; a.multiline == b.multiline &amp;&amp; a.ignoreCase == b.ignoreCase;</div><div class="line">             &#125;</div><div class="line">             // 当执行到此时, ab两个数据应该为类型相同的对象或数组类型</div><div class="line">             if( typeof a != 'object' || typeof b != 'object')</div><div class="line">                 return false;</div><div class="line">             // stack(堆)是在isEqual调用eq函数时内部传递的空数组, 在后面比较对象和数据的内部迭代中调用eq方法也会传递</div><div class="line">             // length记录堆的长度</div><div class="line">             var length = stack.length;</div><div class="line">             while(length--) &#123;</div><div class="line">                 // 如果堆中的某个对象与数据a匹配, 则认为相等</div><div class="line">                 if(stack[length] == a)</div><div class="line">                     return true;</div><div class="line">             &#125;</div><div class="line">             // 将数据a添加到堆中</div><div class="line">             stack.push(a);</div><div class="line">             // 定义一些局部变量</div><div class="line">             var size = 0, result = true;</div><div class="line">             // 通过递归深层比较对象和数组</div><div class="line">             if(className == '[object Array]') &#123;</div><div class="line">                 // 被比较的数据为数组类型</div><div class="line">                 // size记录数组的长度</div><div class="line">                 // result比较两个数组的长度是否一致, 如果长度不一致, 则方法的最后将返回result(即false)</div><div class="line">                 size = a.length;</div><div class="line">                 result = size == b.length;</div><div class="line">                 // 如果两个数组的长度一致</div><div class="line">                 if(result) &#123;</div><div class="line">                     // 调用eq方法对数组中的元素进行迭代比较(如果数组中包含二维数组或对象, eq方法会进行深层比较)</div><div class="line">                     while(size--) &#123;</div><div class="line">                         // 在确保两个数组都存在当前索引的元素时, 调用eq方法深层比较(将堆数据传递给eq方法)</div><div class="line">                         // 将比较的结果存储到result变量, 如果result为false(即在比较中得到某个元素的数据不一致), 则停止迭代</div><div class="line">                         if(!( result = size in a == size in b &amp;&amp; eq(a[size], b[size], stack)))</div><div class="line">                             break;</div><div class="line">                     &#125;</div><div class="line">                 &#125;</div><div class="line">             &#125; else &#123;</div><div class="line">                 // 被比较的数据为对象类型</div><div class="line">                 // 如果两个对象不是同一个类的实例(通过constructor属性比较), 则认为两个对象不相等</div><div class="line">                 if('constructor' in a != 'constructor' in b || a.constructor != b.constructor)</div><div class="line">                     return false;</div><div class="line">                 // 深层比较两个对象中的数据</div><div class="line">                 for(var key in a) &#123;</div><div class="line">                     if(_.has(a, key)) &#123;</div><div class="line">                         // size用于记录比较过的属性数量, 因为这里遍历的是a对象的属性, 并比较b对象中该属性的数据</div><div class="line">                         // 当b对象中的属性数量多余a对象时, 此处的逻辑成立, 但两个对象并不相等</div><div class="line">                         size++;</div><div class="line">                         // 迭代调用eq方法, 深层比较两个对象中的属性值</div><div class="line">                         // 将比较的结果记录到result变量, 当比较到不相等的数据时停止迭代</div><div class="line">                         if(!( result = _.has(b, key) &amp;&amp; eq(a[key], b[key], stack)))</div><div class="line">                             break;</div><div class="line">                     &#125;</div><div class="line">                 &#125;</div><div class="line">                 // 深层比较完毕, 这里已经可以确保在对象a中的所有数据, 对象b中也存在相同的数据</div><div class="line">                 // 根据size(对象属性长度)检查对象b中的属性数量是否与对象a相等</div><div class="line">                 if(result) &#123;</div><div class="line">                     // 遍历对象b中的所有属性</div><div class="line">                     for(key in b) &#123;</div><div class="line">                         // 当size已经到0时(即对象a中的属性数量已经遍历完毕), 而对象b中还存在有属性, 则对象b中的属性多于对象a</div><div class="line">                         if(_.has(b, key) &amp;&amp; !(size--))</div><div class="line">                             break;</div><div class="line">                     &#125;</div><div class="line">                     // 当对象b中的属性多于对象a, 则认为两个对象不相等</div><div class="line">                     result = !size;</div><div class="line">                 &#125;</div><div class="line">             &#125;</div><div class="line">             // 函数执行完毕时, 从堆中移除第一个数据(在比较对象或数组时, 会迭代eq方法, 堆中可能存在多个数据)</div><div class="line">             stack.pop();</div><div class="line">             // 返回的result记录了最终的比较结果</div><div class="line">             return result;</div><div class="line">         &#125;</div><div class="line"></div><div class="line">         // 对两个数据的值进行比较(支持复合数据类型), 内部函数eq的外部方法</div><div class="line">         _.isEqual = function(a, b) &#123;</div><div class="line">             return eq(a, b, []);</div><div class="line">         &#125;;</div><div class="line">         // 检查数据是否为空值, 包含'', false, 0, null, undefined, NaN, 空数组(数组长度为0)和空对象(对象本身没有任何属性)</div><div class="line">         _.isEmpty = function(obj) &#123;</div><div class="line">             // obj被转换为Boolean类型后值为false</div><div class="line">             if(obj == null)</div><div class="line">                 return true;</div><div class="line">             // 检查对象或字符串长度是否为0</div><div class="line">             if(_.isArray(obj) || _.isString(obj))</div><div class="line">                 return obj.length === 0;</div><div class="line">             // 检查对象(使用for in循环时将首先循环对象本身的属性, 其次是原型链中的属性), 因此如果第一个属性是属于对象本身的, 那么该对象不是一个空对象</div><div class="line">             for(var key in obj)</div><div class="line">             if(_.has(obj, key))</div><div class="line">                 return false;</div><div class="line">             // 所有数据类型均没有通过验证, 是一个空数据</div><div class="line">             return true;</div><div class="line">         &#125;;</div><div class="line">         // 验证对象是否是一个DOM对象</div><div class="line">         _.isElement = function(obj) &#123;</div><div class="line">             return !!(obj &amp;&amp; obj.nodeType == 1);</div><div class="line">         &#125;;</div><div class="line">         // 验证对象是否是一个数组类型, 优先调用宿主环境提供的isArray方法</div><div class="line">         _.isArray = nativeIsArray ||</div><div class="line">         function(obj) &#123;</div><div class="line">             return toString.call(obj) == '[object Array]';</div><div class="line">         &#125;;</div><div class="line"></div><div class="line">         // 验证对象是否是一个复合数据类型的对象(即非基本数据类型String, Boolean, Number, null, undefined)</div><div class="line">         // 如果基本数据类型通过new进行创建, 则也属于对象类型</div><div class="line">         _.isObject = function(obj) &#123;</div><div class="line">             return obj === Object(obj);</div><div class="line">         &#125;;</div><div class="line">         // 检查一个数据是否是一个arguments参数对象</div><div class="line">         _.isArguments = function(obj) &#123;</div><div class="line">             return toString.call(obj) == '[object Arguments]';</div><div class="line">         &#125;;</div><div class="line">         // 验证isArguments函数, 如果运行环境无法正常验证arguments类型的数据, 则重新定义isArguments方法</div><div class="line">         if(!_.isArguments(arguments)) &#123;</div><div class="line">             // 对于环境无法通过toString验证arguments类型的, 则通过调用arguments独有的callee方法来进行验证</div><div class="line">             _.isArguments = function(obj) &#123;</div><div class="line">                 // callee是arguments的一个属性, 指向对arguments所属函数自身的引用</div><div class="line">                 return !!(obj &amp;&amp; _.has(obj, 'callee'));</div><div class="line">             &#125;;</div><div class="line">         &#125;</div><div class="line"></div><div class="line">         // 验证对象是否是一个函数类型</div><div class="line">         _.isFunction = function(obj) &#123;</div><div class="line">             return toString.call(obj) == '[object Function]';</div><div class="line">         &#125;;</div><div class="line">         // 验证对象是否是一个字符串类型</div><div class="line">         _.isString = function(obj) &#123;</div><div class="line">             return toString.call(obj) == '[object String]';</div><div class="line">         &#125;;</div><div class="line">         // 验证对象是否是一个数字类型</div><div class="line">         _.isNumber = function(obj) &#123;</div><div class="line">             return toString.call(obj) == '[object Number]';</div><div class="line">         &#125;;</div><div class="line">         // 检查一个数字是否为有效数字且有效范围(Number类型, 值在负无穷大 - 正无穷大之间)</div><div class="line">         _.isFinite = function(obj) &#123;</div><div class="line">             return _.isNumber(obj) &amp;&amp; isFinite(obj);</div><div class="line">         &#125;;</div><div class="line">         // 检查数据是否为NaN类型(所有数据中只有NaN与NaN不相等)</div><div class="line">         _.isNaN = function(obj) &#123;</div><div class="line">             return obj !== obj;</div><div class="line">         &#125;;</div><div class="line">         // 检查数据是否时Boolean类型</div><div class="line">         _.isBoolean = function(obj) &#123;</div><div class="line">             // 支持字面量和对象形式的Boolean数据</div><div class="line">             return obj === true || obj === false || toString.call(obj) == '[object Boolean]';</div><div class="line">         &#125;;</div><div class="line">         // 检查数据是否是一个Date类型</div><div class="line">         _.isDate = function(obj) &#123;</div><div class="line">             return toString.call(obj) == '[object Date]';</div><div class="line">         &#125;;</div><div class="line">         // 检查数据是否是一个正则表达式类型</div><div class="line">         _.isRegExp = function(obj) &#123;</div><div class="line">             return toString.call(obj) == '[object RegExp]';</div><div class="line">         &#125;;</div><div class="line">         // 检查数据是否是Null值</div><div class="line">         _.isNull = function(obj) &#123;</div><div class="line">             return obj === null;</div><div class="line">         &#125;;</div><div class="line">         // 检查数据是否是Undefined(未定义的)值</div><div class="line">         _.isUndefined = function(obj) &#123;</div><div class="line">             return obj ===</div><div class="line">             void 0;</div><div class="line">         &#125;;</div><div class="line">         // 检查一个属性是否属于对象本身, 而非原型链中</div><div class="line">         _.has = function(obj, key) &#123;</div><div class="line">             return hasOwnProperty.call(obj, key);</div><div class="line">         &#125;;</div><div class="line">         // 工具函数</div><div class="line">         // -----------------</div><div class="line"></div><div class="line">         // 放弃_(下划线)命名的Underscore对象, 并返回Underscore对象, 一般用于避免命名冲突或规范命名方式</div><div class="line">         // 例如:</div><div class="line">         // var us = _.noConflict(); // 取消_(下划线)命名, 并将Underscore对象存放于us变量中</div><div class="line">         // console.log(_); // _(下划线)已经无法再访问Underscore对象, 而恢复为Underscore定义前的值</div><div class="line">         _.noConflict = function() &#123;</div><div class="line">             // previousUnderscore变量记录了Underscore定义前_(下划线)的值</div><div class="line">             root._ = previousUnderscore;</div><div class="line">             return this;</div><div class="line">         &#125;;</div><div class="line">         // 返回与参数相同的值, 一般用于将一个数据的获取方式转换为函数获取方式(内部用于构建方法时作为默认处理器函数)</div><div class="line">         _.identity = function(value) &#123;</div><div class="line">             return value;</div><div class="line">         &#125;;</div><div class="line">         // 使指定的函数迭代执行n次(无参数)</div><div class="line">         _.times = function(n, iterator, context) &#123;</div><div class="line">             for(var i = 0; i &lt; n; i++)</div><div class="line">             iterator.call(context, i);</div><div class="line">         &#125;;</div><div class="line">         // 将HTML字符串中的特殊字符转换为HTML实体, 包含 &amp; &lt; &gt; " ' \</div><div class="line">         _.escape = function(string) &#123;</div><div class="line">             return ('' + string).replace(/&amp;/g, '&amp;').replace(/&lt;/g, '&lt;').replace(/&gt;/g, '&gt;').replace(/"/g, '"').replace(/'/g, ''').replace(/\//g, '/');</div><div class="line">         &#125;;</div><div class="line">         // 指定一个对象的属性, 返回该属性对应的值, 如果该属性对应的是一个函数, 则会执行该函数并返回结果</div><div class="line">         _.result = function(object, property) &#123;</div><div class="line">             if(object == null)</div><div class="line">                 return null;</div><div class="line">             // 获取对象的值</div><div class="line">             var value = object[property];</div><div class="line">             // 如果值是一个函数, 则执行并返回, 否则将直接返回</div><div class="line">             return _.isFunction(value) ? value.call(object) : value;</div><div class="line">         &#125;;</div><div class="line">         // 添加一系列自定义方法到Underscore对象中, 用于扩展Underscore插件</div><div class="line">         _.mixin = function(obj) &#123;</div><div class="line">             // obj是一个集合一系列自定义方法的对象, 此处通过each遍历对象的方法</div><div class="line">             each(_.functions(obj), function(name) &#123;</div><div class="line">                 // 通过addToWrapper函数将自定义方法添加到Underscore构建的对象中, 用于支持对象式调用</div><div class="line">                 // 同时将方法添加到 _ 本身, 用于支持函数式调用</div><div class="line">                 addToWrapper(name, _[name] = obj[name]);</div><div class="line">             &#125;);</div><div class="line">         &#125;;</div><div class="line">         // 获取一个全局唯一标识, 标识从0开始累加</div><div class="line">         var idCounter = 0;</div><div class="line">         // prefix表示标识的前缀, 如果没有指定前缀则直接返回标识, 一般用于给对象或DOM创建唯一ID</div><div class="line">         _.uniqueId = function(prefix) &#123;</div><div class="line">             var id = idCounter++;</div><div class="line">             return prefix ? prefix + id : id;</div><div class="line">         &#125;;</div><div class="line">         // 定义模板的界定符号, 在template方法中使用</div><div class="line">         _.templateSettings = &#123;</div><div class="line">             // JavaScript可执行代码的界定符</div><div class="line">             evaluate : /&lt;%([\s\S]+?)%&gt;/g,</div><div class="line">             // 直接输出变量的界定符</div><div class="line">             interpolate : /&lt;%=([\s\S]+?)%&gt;/g,</div><div class="line">             // 需要将HTML输出为字符串(将特殊符号转换为字符串形式)的界定符</div><div class="line">             escape : /&lt;%-([\s\S]+?)%&gt;/g</div><div class="line">         &#125;;</div><div class="line"></div><div class="line">         var noMatch = /.^/;</div><div class="line"></div><div class="line">         // escapes对象记录了需要进行相互换转的特殊符号与字符串形式的对应关系, 在两者进行相互转换时作为索引使用</div><div class="line">         // 首先根据字符串形式定义特殊字符</div><div class="line">         var escapes = &#123;</div><div class="line">             '\\' : '\\',</div><div class="line">             "'" : "'",</div><div class="line">             'r' : '\r',</div><div class="line">             'n' : '\n',</div><div class="line">             't' : '\t',</div><div class="line">             'u2028' : '\u2028',</div><div class="line">             'u2029' : '\u2029'</div><div class="line">         &#125;;</div><div class="line">         // 遍历所有特殊字符字符串, 并以特殊字符作为key记录字符串形式</div><div class="line">         for(var p in escapes)</div><div class="line">         escapes[escapes[p]] = p;</div><div class="line">         // 定义模板中需要替换的特殊符号, 包含反斜杠, 单引号, 回车符, 换行符, 制表符, 行分隔符, 段落分隔符</div><div class="line">         // 在将字符串中的特殊符号转换为字符串形式时使用</div><div class="line">         var escaper = /\\|'|\r|\n|\t|\u2028|\u2029/g;</div><div class="line">         // 在将字符串形式的特殊符号进行反转(替换)时使用</div><div class="line">         var unescaper = /\\(\\|'|r|n|t|u2028|u2029)/g;</div><div class="line"></div><div class="line">         // 反转字符串中的特殊符号</div><div class="line">         // 在模板中涉及到需要执行的JavaScript源码, 需要进行特殊符号反转, 否则如果以HTML实体或字符串形式出现, 会抛出语法错误</div><div class="line">         var unescape = function(code) &#123;</div><div class="line">             return code.replace(unescaper, function(match, escape) &#123;</div><div class="line">                 return escapes[escape];</div><div class="line">             &#125;);</div><div class="line">         &#125;;</div><div class="line">         // Underscore模板解析方法, 用于将数据填充到一个模板字符串中</div><div class="line">         // 模板解析流程:</div><div class="line">         // 1. 将模板中的特殊符号转换为字符串</div><div class="line">         // 2. 解析escape形式标签, 将内容解析为HTML实体</div><div class="line">         // 3. 解析interpolate形式标签, 输出变量</div><div class="line">         // 4. 解析evaluate形式标签, 创建可执行的JavaScript代码</div><div class="line">         // 5. 生成一个处理函数, 该函数在得到数据后可直接填充到模板并返回填充后的字符串</div><div class="line">         // 6. 根据参数返回填充后的字符串或处理函数的句柄</div><div class="line">         // -------------------</div><div class="line">         // 在模板体内, 可通过argments获取2个参数, 分别为填充数据(名称为obj)和Underscore对象(名称为_)</div><div class="line">         _.template = function(text, data, settings) &#123;</div><div class="line">             // 模板配置, 如果没有指定配置项, 则使用templateSettings中指定的配置项</div><div class="line">             settings = _.defaults(settings || &#123;&#125;, _.templateSettings);</div><div class="line"></div><div class="line">             // 开始将模板解析为可执行源码</div><div class="line">             var source = "__p+='" + text.replace(escaper, function(match) &#123;</div><div class="line">                 // 将特殊符号转移为字符串形式</div><div class="line">                 return '\\' + escapes[match];</div><div class="line">             &#125;).replace(settings.escape || noMatch, function(match, code) &#123;</div><div class="line">                 // 解析escape形式标签 &lt;%- %&gt;, 将变量中包含的HTML通过_.escape函数转换为HTML实体</div><div class="line">                 return "'+\n_.escape(" + unescape(code) + ")+\n'";</div><div class="line">             &#125;).replace(settings.interpolate || noMatch, function(match, code) &#123;</div><div class="line">                 // 解析interpolate形式标签 &lt;%= %&gt;, 将模板内容作为一个变量与其它字符串连接起来, 则会作为一个变量输出</div><div class="line">                 return "'+\n(" + unescape(code) + ")+\n'";</div><div class="line">             &#125;).replace(settings.evaluate || noMatch, function(match, code) &#123;</div><div class="line">                 // 解析evaluate形式标签 &lt;% %&gt;, evaluate标签中存储了需要执行的JavaScript代码, 这里结束当前的字符串拼接, 并在新的一行作为JavaScript语法执行, 并将后面的内容再次作为字符串的开始, 因此evaluate标签内的JavaScript代码就能被正常执行</div><div class="line">                 return "';\n" + unescape(code) + "\n;__p+='";</div><div class="line">             &#125;) + "';\n";</div><div class="line">             if(!settings.variable)</div><div class="line">                 source = 'with(obj||&#123;&#125;)&#123;\n' + source + '&#125;\n';</div><div class="line">             source = "var __p='';" + "var print=function()&#123;__p+=Array.prototype.join.call(arguments, '')&#125;;\n" + source + "return __p;\n";</div><div class="line"></div><div class="line">             // 创建一个函数, 将源码作为函数执行体, 将obj和Underscore作为参数传递给该函数</div><div class="line">             var render = new Function(settings.variable || 'obj', '_', source);</div><div class="line">             // 如果指定了模板的填充数据, 则替换模板内容, 并返回替换后的结果</div><div class="line">             if(data)</div><div class="line">                 return render(data, _);</div><div class="line">             // 如果没有指定填充数据, 则返回一个函数, 该函数用于将接收到的数据替换到模板</div><div class="line">             // 如果在程序中会多次填充相同模板, 那么在第一次调用时建议不指定填充数据, 在获得处理函数的引用后, 再直接调用会提高运行效率</div><div class="line">             var template = function(data) &#123;</div><div class="line">                 return render.call(this, data, _);</div><div class="line">             &#125;;</div><div class="line">             // 将创建的源码字符串添加到函数对象中, 一般用于调试和测试</div><div class="line">             template.source = 'function(' + (settings.variable || 'obj') + ')&#123;\n' + source + '&#125;';</div><div class="line">             // 没有指定填充数据的情况下, 返回处理函数句柄</div><div class="line">             return template;</div><div class="line">         &#125;;</div><div class="line">         // 支持Underscore对象的方法链操作, 可参考 wrapper.prototype.chain</div><div class="line">         _.chain = function(obj) &#123;</div><div class="line">             return _(obj).chain();</div><div class="line">         &#125;;</div><div class="line">         // Underscore对象封装相关方法</div><div class="line">         // ---------------</div><div class="line"></div><div class="line">         // 创建一个包装器, 将一些原始数据进行包装</div><div class="line">         // 所有的undersocre对象, 内部均通过wrapper函数进行构造和封装</div><div class="line">         // Underscore与wrapper的内部关系:</div><div class="line">         // -内部定义变量_, 将Underscore相关的方法添加到_, 这样就可以支持函数式的调用, 如_.bind()</div><div class="line">         // -内部定义wrapper类, 将_的原型对象指向wrapper类的原型</div><div class="line">         // -将Underscore相关的方法添加到wrapper原型, 创建的_对象就具备了Underscore的方法</div><div class="line">         // -将Array.prototype相关方法添加到wrapper原型, 创建的_对象就具备了Array.prototype中的方法</div><div class="line">         // -new _()时实际创建并返回了一个wrapper()对象, 并将原始数组存储到_wrapped变量, 并将原始值作为第一个参数调用对应方法</div><div class="line">         var wrapper = function(obj) &#123;</div><div class="line">             // 原始数据存放在包装对象的_wrapped属性中</div><div class="line">             this._wrapped = obj;</div><div class="line">         &#125;;</div><div class="line">         // 将Underscore的原型对象指向wrapper的原型, 因此通过像wrapper原型中添加方法, Underscore对象也会具备同样的方法</div><div class="line">         _.prototype = wrapper.prototype;</div><div class="line"></div><div class="line">         // 返回一个对象, 如果当前Underscore调用了chain()方法(即_chain属性为true), 则返回一个被包装的Underscore对象, 否则返回对象本身</div><div class="line">         // result函数用于在构造方法链时返回Underscore的包装对象</div><div class="line">         var result = function(obj, chain) &#123;</div><div class="line">             return chain ? _(obj).chain() : obj;</div><div class="line">         &#125;;</div><div class="line">         // 将一个自定义方法添加到Underscore对象中(实际是添加到wrapper的原型中, 而Underscore对象的原型指向了wrapper的原型)</div><div class="line">         var addToWrapper = function(name, func) &#123;</div><div class="line">             // 向wrapper原型中添加一个name函数, 该函数调用func函数, 并支持了方法链的处理</div><div class="line">             wrapper.prototype[name] = function() &#123;</div><div class="line">                 // 获取func函数的参数, 并将当前的原始数据添加到第一个参数</div><div class="line">                 var args = slice.call(arguments);</div><div class="line">                 unshift.call(args, this._wrapped);</div><div class="line">                 // 执行函数并返回结果, 并通过result函数对方法链进行封装, 如果当前调用了chain()方法, 则返回封装后的Underscore对象, 否则返回对象本身</div><div class="line">                 return result(func.apply(_, args), this._chain);</div><div class="line">             &#125;;</div><div class="line">         &#125;;</div><div class="line">         // 将内部定义的_(下划线, 即Underscore方法集合对象)中的方法复制到wrapper的原型链中(即Underscore的原型链中)</div><div class="line">         // 这是为了在构造对象式调用的Underscore对象时, 这些对象也会具有内部定义的Underscore方法</div><div class="line">         _.mixin(_);</div><div class="line"></div><div class="line">         // 将Array.prototype中的相关方法添加到Underscore对象中, 因此在封装后的Underscore对象中也可以直接调用Array.prototype中的方法</div><div class="line">         // 如: _([]).push()</div><div class="line">         each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) &#123;</div><div class="line">             // 获取Array.prototype中对应方法的引用</div><div class="line">             var method = ArrayProto[name];</div><div class="line">             // 将该方法添加到Underscore对象中(实际是添加到wrapper的原型对象, 因此在创建Underscore对象时同时具备了该方法)</div><div class="line">             wrapper.prototype[name] = function() &#123;</div><div class="line">                 // _wrapped变量中存储Underscore对象的原始值</div><div class="line">                 var wrapped = this._wrapped;</div><div class="line">                 // 调用Array对应的方法并返回结果</div><div class="line">                 method.apply(wrapped, arguments);</div><div class="line">                 var length = wrapped.length;</div><div class="line">                 if((name == 'shift' || name == 'splice') &amp;&amp; length === 0)</div><div class="line">                     delete wrapped[0];</div><div class="line">                 // 即使是对于Array中的方法, Underscore同样支持方法链操作</div><div class="line">                 return result(wrapped, this._chain);</div><div class="line">             &#125;;</div><div class="line">         &#125;);</div><div class="line">         // 作用同于上一段代码, 将数组中的一些方法添加到Underscore对象, 并支持了方法链操作</div><div class="line">         // 区别在于上一段代码所添加的函数, 均返回Array对象本身(也可能是封装后的Array), concat, join, slice方法将返回一个新的Array对象(也可能是封装后的Array)</div><div class="line">         each(['concat', 'join', 'slice'], function(name) &#123;</div><div class="line">             var method = ArrayProto[name];</div><div class="line">             wrapper.prototype[name] = function() &#123;</div><div class="line">                 return result(method.apply(this._wrapped, arguments), this._chain);</div><div class="line">             &#125;;</div><div class="line">         &#125;);</div><div class="line">         // 对Underscore对象进行链式操作的声明方法</div><div class="line">         wrapper.prototype.chain = function() &#123;</div><div class="line">             // this._chain用来标示当前对象是否使用链式操作</div><div class="line">             // 对于支持方法链操作的数据, 一般在具体方法中会返回一个Underscore对象, 并将原始值存放在_wrapped属性中, 也可以通过value()方法获取原始值</div><div class="line">             this._chain = true;</div><div class="line">             return this;</div><div class="line">         &#125;;</div><div class="line">         // 返回被封装的Underscore对象的原始值(存放在_wrapped属性中)</div><div class="line">         wrapper.prototype.value = function() &#123;</div><div class="line">             return this._wrapped;</div><div class="line">         &#125;;</div><div class="line">     &#125;).call(this);</div></pre></td></tr></table></figure></div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="//kenve.github.io/2016/09/18/underscore-source-code-learning/" data-id="cj2efebov000r5sdvsm7nnoal" class="article-share-link">分享</a><div class="tags"><a href="/tags/javascript/">javascript</a></div><div class="post-nav"><a href="/2017/01/20/javascript-utils/" class="pre">项目中用过的那些javascript工具函数</a><a href="/2016/06/10/graduation-feeling/" class="next">感想</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="//kenve.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Web/">Web</a><span class="category-list-count">4</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/随笔/" style="font-size: 15px;">随笔</a> <a href="/tags/javascript/" style="font-size: 15px;">javascript</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/html5/" style="font-size: 15px;">html5</a> <a href="/tags/react/" style="font-size: 15px;">react</a></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2017 <a href="/." rel="nofollow">Kenve's Blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>